<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session 57f2c386-cd7a-46a9-b7f3-458fb9628e0e (2026-01-21 07:05Z) -->

# 日誌訊息亂碼問題 (2026-01-21 07:05Z)

_**User**_

@pass/main-custom1-260121.log:1014-1025 為何紀錄的訊息中有亂碼？（看起來像中文）

---

_**Agent (model default, mode Agent)**_


檢查日誌文件，確認亂碼原因。


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\_Code\_GitHub\eigent-260119\pass\main-custom1-260121.log</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How is taskkill command executed and how are error messages captured?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\electron\\main\\utils\\process.ts",
        "range": {
          "startPosition": {
            "line": 239,
            "column": 1
          },
          "endPosition": {
            "line": 270,
            "column": 1
          }
        },
        "contents": "export async function killProcessByName(name: string): Promise&lt;void&gt; {\n  const platform = process.platform;\n  try {\n    if (platform === 'win32') {\n      await new Promise&lt;void&gt;((resolve, reject) =&gt; {\n        // /F = force, /IM = image name\n        const cmd = spawn('taskkill', ['/F', '/IM', &#96;${name}.exe&#96;]);\n        cmd.on('close', (code) =&gt; {\n          // code 0 = success, code 128 = process not found (which is fine)\n          if (code === 0 || code === 128) resolve();\n          else reject(new Error(&#96;taskkill exited with code ${code}&#96;));\n        });\n        cmd.on('error', reject);\n      });\n    } else {\n      await new Promise&lt;void&gt;((resolve, reject) =&gt; {\n        const cmd = spawn('pkill', ['-9', name]);\n        cmd.on('close', (code) =&gt; {\n          // code 0 = success, code 1 = no process found (which is fine)\n          if (code === 0 || code === 1) resolve();\n          else reject(new Error(&#96;pkill exited with code ${code}&#96;));\n        });\n        cmd.on('error', reject);\n      });\n    }\n  } catch (err) {\n    // Ignore errors, just best effort\n    log.warn(&#96;Failed to kill process ${name}:&#96;, err);\n  }\n}",
        "signatures": {},
        "detailedLines": [
          {
            "text": "export async function killProcessByName(name: string): Promise&lt;void&gt; {",
            "lineNumber": 242,
            "isSignature": true
          },
          {
            "text": "  const platform = process.platform;",
            "lineNumber": 243
          },
          {
            "text": "  try {",
            "lineNumber": 244
          },
          {
            "text": "    if (platform === 'win32') {",
            "lineNumber": 245
          },
          {
            "text": "      await new Promise&lt;void&gt;((resolve, reject) =&gt; {",
            "lineNumber": 246
          },
          {
            "text": "        // /F = force, /IM = image name",
            "lineNumber": 247
          },
          {
            "text": "        const cmd = spawn('taskkill', ['/F', '/IM', &#96;${name}.exe&#96;]);",
            "lineNumber": 248
          },
          {
            "text": "        cmd.on('close', (code) =&gt; {",
            "lineNumber": 249
          },
          {
            "text": "          // code 0 = success, code 128 = process not found (which is fine)",
            "lineNumber": 250
          },
          {
            "text": "          if (code === 0 || code === 128) resolve();",
            "lineNumber": 251
          },
          {
            "text": "          else reject(new Error(&#96;taskkill exited with code ${code}&#96;));",
            "lineNumber": 252
          },
          {
            "text": "        });",
            "lineNumber": 253
          },
          {
            "text": "        cmd.on('error', reject);",
            "lineNumber": 254
          },
          {
            "text": "      });",
            "lineNumber": 255
          },
          {
            "text": "    } else {",
            "lineNumber": 256
          },
          {
            "text": "      await new Promise&lt;void&gt;((resolve, reject) =&gt; {",
            "lineNumber": 257
          },
          {
            "text": "        const cmd = spawn('pkill', ['-9', name]);",
            "lineNumber": 258
          },
          {
            "text": "        cmd.on('close', (code) =&gt; {",
            "lineNumber": 259
          },
          {
            "text": "          // code 0 = success, code 1 = no process found (which is fine)",
            "lineNumber": 260
          },
          {
            "text": "          if (code === 0 || code === 1) resolve();",
            "lineNumber": 261
          },
          {
            "text": "          else reject(new Error(&#96;pkill exited with code ${code}&#96;));",
            "lineNumber": 262
          },
          {
            "text": "        });",
            "lineNumber": 263
          },
          {
            "text": "        cmd.on('error', reject);",
            "lineNumber": 264
          },
          {
            "text": "      });",
            "lineNumber": 265
          },
          {
            "text": "    }",
            "lineNumber": 266
          },
          {
            "text": "  } catch (err) {",
            "lineNumber": 267
          },
          {
            "text": "    // Ignore errors, just best effort",
            "lineNumber": 268
          },
          {
            "text": "    log.warn(&#96;Failed to kill process ${name}:&#96;, err);",
            "lineNumber": 269
          },
          {
            "text": "  }",
            "lineNumber": 270
          },
          {
            "text": "}",
            "lineNumber": 271,
            "isSignature": true
          }
        ]
      },
      "score": 0.4491718113422394
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\electron\\main\\index.ts",
        "range": {
          "startPosition": {
            "line": 320
          },
          "endPosition": {
            "line": 1184,
            "column": 1
          }
        },
        "contents": "function registerIpcHandlers() {\n\nasync (event, command: string, email: string) =&gt; {\n(resolve) =&gt; {\n(data) =&gt; {\n\n          });\n\n          // Realtime listen error output\n          child.stderr.on('data', (data) =&gt; {\n            const output = data.toString();\n            stderr += output;\n            if (output.includes('OAuth callback server running at')) {\n              const url = output\n                .split('OAuth callback server running at')[1]\n                .trim();\n              log.info('detect OAuth callback URL:', url);\n\n              // Notify frontend to callback URL\n              if (win &amp;&amp; !win.isDestroyed()) {\n                const match = url.match(/^https?:\\/\\/[^:\\n]+:\\d+/);\n                const cleanedUrl = match ? match[0] : null;\n                log.info('cleanedUrl', cleanedUrl);\n                win.webContents.send('oauth-callback-url', {\n                  url: cleanedUrl,\n                  provider: 'notion', // TODO: can be set dynamically according to actual situation\n                });\n              }\n            }\n            if (output.includes('Press Ctrl+C to exit')) {\n              child.kill();\n            }\n            log.info(' real-time error output:', output.trim());\n          });\n\n          // Listen process exit\n          child.on('close', (code) =&gt; {\n            log.info(&#96; command execute complete, exit code: ${code}&#96;);\n            resolve({ success: code === null, stdout, stderr });\n          });\n\n          // Listen process error\n          child.on('error', (error) =&gt; {\n            log.error(' command execute error:', error);\n            resolve({ success: false, error: error.message });\n          });\n        });\n      } catch (error: any) {\n        log.error(' command execute failed:', error);\n        return { success: false, error: error.message };\n      }\n    }\n  );\n\n  ipcMain.handle('read-file-dataurl', async (event, filePath) =&gt; {\n    try\n  }\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 321,
                "column": 1
              },
              "endPosition": {
                "line": 322,
                "column": 3
              }
            },
            {
              "startPosition": {
                "line": 373,
                "column": 3
              },
              "endPosition": {
                "line": 373,
                "column": 3
              }
            },
            {
              "startPosition": {
                "line": 375,
                "column": 5
              },
              "endPosition": {
                "line": 376,
                "column": 7
              }
            },
            {
              "startPosition": {
                "line": 392,
                "column": 28
              },
              "endPosition": {
                "line": 393,
                "column": 11
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "function registerIpcHandlers() {",
            "lineNumber": 321,
            "isSignature": true
          },
          {
            "lineNumber": 373
          },
          {
            "text": "async (event, command: string, email: string) =&gt; {",
            "lineNumber": 375
          },
          {
            "text": "(resolve) =&gt; {",
            "lineNumber": 392
          },
          {
            "text": "(data) =&gt; {",
            "lineNumber": 403
          },
          {
            "lineNumber": 406
          },
          {
            "text": "          });",
            "lineNumber": 407
          },
          {
            "lineNumber": 408
          },
          {
            "text": "          // Realtime listen error output",
            "lineNumber": 409
          },
          {
            "text": "          child.stderr.on('data', (data) =&gt; {",
            "lineNumber": 410
          },
          {
            "text": "            const output = data.toString();",
            "lineNumber": 411
          },
          {
            "text": "            stderr += output;",
            "lineNumber": 412
          },
          {
            "text": "            if (output.includes('OAuth callback server running at')) {",
            "lineNumber": 413
          },
          {
            "text": "              const url = output",
            "lineNumber": 414
          },
          {
            "text": "                .split('OAuth callback server running at')[1]",
            "lineNumber": 415
          },
          {
            "text": "                .trim();",
            "lineNumber": 416
          },
          {
            "text": "              log.info('detect OAuth callback URL:', url);",
            "lineNumber": 417
          },
          {
            "lineNumber": 418
          },
          {
            "text": "              // Notify frontend to callback URL",
            "lineNumber": 419
          },
          {
            "text": "              if (win &amp;&amp; !win.isDestroyed()) {",
            "lineNumber": 420
          },
          {
            "text": "                const match = url.match(/^https?:\\/\\/[^:\\n]+:\\d+/);",
            "lineNumber": 421
          },
          {
            "text": "                const cleanedUrl = match ? match[0] : null;",
            "lineNumber": 422
          },
          {
            "text": "                log.info('cleanedUrl', cleanedUrl);",
            "lineNumber": 423
          },
          {
            "text": "                win.webContents.send('oauth-callback-url', {",
            "lineNumber": 424
          },
          {
            "text": "                  url: cleanedUrl,",
            "lineNumber": 425
          },
          {
            "text": "                  provider: 'notion', // TODO: can be set dynamically according to actual situation",
            "lineNumber": 426
          },
          {
            "text": "                });",
            "lineNumber": 427
          },
          {
            "text": "              }",
            "lineNumber": 428
          },
          {
            "text": "            }",
            "lineNumber": 429
          },
          {
            "text": "            if (output.includes('Press Ctrl+C to exit')) {",
            "lineNumber": 430
          },
          {
            "text": "              child.kill();",
            "lineNumber": 431
          },
          {
            "text": "            }",
            "lineNumber": 432
          },
          {
            "text": "            log.info(' real-time error output:', output.trim());",
            "lineNumber": 433
          },
          {
            "text": "          });",
            "lineNumber": 434
          },
          {
            "lineNumber": 435
          },
          {
            "text": "          // Listen process exit",
            "lineNumber": 436
          },
          {
            "text": "          child.on('close', (code) =&gt; {",
            "lineNumber": 437
          },
          {
            "text": "            log.info(&#96; command execute complete, exit code: ${code}&#96;);",
            "lineNumber": 438
          },
          {
            "text": "            resolve({ success: code === null, stdout, stderr });",
            "lineNumber": 439
          },
          {
            "text": "          });",
            "lineNumber": 440
          },
          {
            "lineNumber": 441
          },
          {
            "text": "          // Listen process error",
            "lineNumber": 442
          },
          {
            "text": "          child.on('error', (error) =&gt; {",
            "lineNumber": 443
          },
          {
            "text": "            log.error(' command execute error:', error);",
            "lineNumber": 444
          },
          {
            "text": "            resolve({ success: false, error: error.message });",
            "lineNumber": 445
          },
          {
            "text": "          });",
            "lineNumber": 446
          },
          {
            "text": "        });",
            "lineNumber": 447
          },
          {
            "text": "      } catch (error: any) {",
            "lineNumber": 448
          },
          {
            "text": "        log.error(' command execute failed:', error);",
            "lineNumber": 449
          },
          {
            "text": "        return { success: false, error: error.message };",
            "lineNumber": 450
          },
          {
            "text": "      }",
            "lineNumber": 451
          },
          {
            "text": "    }",
            "lineNumber": 452
          },
          {
            "text": "  );",
            "lineNumber": 453
          },
          {
            "lineNumber": 454
          },
          {
            "text": "  ipcMain.handle('read-file-dataurl', async (event, filePath) =&gt; {",
            "lineNumber": 455
          },
          {
            "text": "    try",
            "lineNumber": 456
          },
          {
            "text": "  }",
            "lineNumber": 465
          },
          {
            "text": "}",
            "lineNumber": 1185,
            "isSignature": true
          }
        ]
      },
      "score": 0.4039652943611145
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\electron\\main\\init.ts",
        "range": {
          "startPosition": {
            "line": 526,
            "column": 1
          },
          "endPosition": {
            "line": 598,
            "column": 1
          }
        },
        "contents": "export async function killProcessOnPort(port: number): Promise&lt;boolean&gt; {\n    try {\n        const platform = process.platform;\n\n        if (platform === 'win32') {\n            // 1. get pid of process listen on port\n            const { stdout: netstatOut } = await execAsync(&#96;netstat -ano | findstr LISTENING | findstr :${port}&#96;);\n            const lines = netstatOut.trim().split(/\\r?\\n/).filter(Boolean);\n            if (lines.length === 0) {\n                console.log(&#96;no process listen on port ${port}&#96;);\n                return true;\n            }\n\n            // get pid from last field\n            const pid = lines[0].trim().split(/\\s+/).pop();\n            if (!pid || isNaN(Number(pid))) {\n                console.log(&#96;Invalid PID extracted for port ${port}: ${pid}&#96;);\n                return false;\n            }\n\n            console.log(&#96;Killing PID: ${pid}&#96;);\n            await execAsync(&#96;taskkill /F /PID ${pid}&#96;);\n        }\n        else if (platform === 'darwin') {\n            await execAsync(&#96;lsof -ti:${port} | xargs kill -9 2&gt;/dev/null || true&#96;);\n        }\n        else {\n            await execAsync(&#96;fuser -k ${port}/tcp 2&gt;/dev/null || true&#96;);\n        }\n\n\n        // Wait a bit for the process to be killed\n        await new Promise(resolve =&gt; setTimeout(resolve, 500));\n\n        // Check if port is now available\n        return await checkPortAvailable(port);\n    } catch (error) {\n        log.error(&#96;Failed to kill process on port ${port}:&#96;, error);\n        return false;\n    }\n}\n\nexport async function findAvailablePort(startPort: number, maxAttempts = 50): Promise&lt;number&gt; {\n    \n}",
        "signatures": {},
        "detailedLines": [
          {
            "text": "export async function killProcessOnPort(port: number): Promise&lt;boolean&gt; {",
            "lineNumber": 529,
            "isSignature": true
          },
          {
            "text": "    try {",
            "lineNumber": 530
          },
          {
            "text": "        const platform = process.platform;",
            "lineNumber": 531
          },
          {
            "lineNumber": 532
          },
          {
            "text": "        if (platform === 'win32') {",
            "lineNumber": 533
          },
          {
            "text": "            // 1. get pid of process listen on port",
            "lineNumber": 534
          },
          {
            "text": "            const { stdout: netstatOut } = await execAsync(&#96;netstat -ano | findstr LISTENING | findstr :${port}&#96;);",
            "lineNumber": 535
          },
          {
            "text": "            const lines = netstatOut.trim().split(/\\r?\\n/).filter(Boolean);",
            "lineNumber": 536
          },
          {
            "text": "            if (lines.length === 0) {",
            "lineNumber": 537
          },
          {
            "text": "                console.log(&#96;no process listen on port ${port}&#96;);",
            "lineNumber": 538
          },
          {
            "text": "                return true;",
            "lineNumber": 539
          },
          {
            "text": "            }",
            "lineNumber": 540
          },
          {
            "lineNumber": 541
          },
          {
            "text": "            // get pid from last field",
            "lineNumber": 542
          },
          {
            "text": "            const pid = lines[0].trim().split(/\\s+/).pop();",
            "lineNumber": 543
          },
          {
            "text": "            if (!pid || isNaN(Number(pid))) {",
            "lineNumber": 544
          },
          {
            "text": "                console.log(&#96;Invalid PID extracted for port ${port}: ${pid}&#96;);",
            "lineNumber": 545
          },
          {
            "text": "                return false;",
            "lineNumber": 546
          },
          {
            "text": "            }",
            "lineNumber": 547
          },
          {
            "lineNumber": 548
          },
          {
            "text": "            console.log(&#96;Killing PID: ${pid}&#96;);",
            "lineNumber": 549
          },
          {
            "text": "            await execAsync(&#96;taskkill /F /PID ${pid}&#96;);",
            "lineNumber": 550
          },
          {
            "text": "        }",
            "lineNumber": 551
          },
          {
            "text": "        else if (platform === 'darwin') {",
            "lineNumber": 552
          },
          {
            "text": "            await execAsync(&#96;lsof -ti:${port} | xargs kill -9 2&gt;/dev/null || true&#96;);",
            "lineNumber": 553
          },
          {
            "text": "        }",
            "lineNumber": 554
          },
          {
            "text": "        else {",
            "lineNumber": 555
          },
          {
            "text": "            await execAsync(&#96;fuser -k ${port}/tcp 2&gt;/dev/null || true&#96;);",
            "lineNumber": 556
          },
          {
            "text": "        }",
            "lineNumber": 557
          },
          {
            "lineNumber": 558
          },
          {
            "lineNumber": 559
          },
          {
            "text": "        // Wait a bit for the process to be killed",
            "lineNumber": 560
          },
          {
            "text": "        await new Promise(resolve =&gt; setTimeout(resolve, 500));",
            "lineNumber": 561
          },
          {
            "lineNumber": 562
          },
          {
            "text": "        // Check if port is now available",
            "lineNumber": 563
          },
          {
            "text": "        return await checkPortAvailable(port);",
            "lineNumber": 564
          },
          {
            "text": "    } catch (error) {",
            "lineNumber": 565
          },
          {
            "text": "        log.error(&#96;Failed to kill process on port ${port}:&#96;, error);",
            "lineNumber": 566
          },
          {
            "text": "        return false;",
            "lineNumber": 567
          },
          {
            "text": "    }",
            "lineNumber": 568
          },
          {
            "text": "}",
            "lineNumber": 569,
            "isSignature": true
          },
          {
            "lineNumber": 570
          },
          {
            "text": "export async function findAvailablePort(startPort: number, maxAttempts = 50): Promise&lt;number&gt; {",
            "lineNumber": 571,
            "isSignature": true
          },
          {
            "text": "    ",
            "lineNumber": 572
          },
          {
            "text": "}",
            "lineNumber": 599,
            "isSignature": true
          }
        ]
      },
      "score": 0.39128243923187256
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\pass\\main-260120.log",
        "range": {
          "startPosition": {
            "line": 559
          },
          "endPosition": {
            "line": 593
          }
        },
        "contents": "[info] before-quit\n[info] quit python_process.pid: 17680\n[info] Cleaning up Python process and all children { pid: 17680 }\n[info] Cleaning up Python process and all children { pid: 17680 }\n[info] Successfully sent SIGTERM to process tree\n[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 17680 /T /F\n���~: PID �� 56776 (PID �� 39004 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 39004 (PID �� 22552 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: ���䴩�ҹ��ժ��ާ@�C\r\n���~: PID �� 54416 (PID �� 17680 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: ���䴩�ҹ��ժ��ާ@�C\r\n���~: PID �� 22552 (PID �� 17680 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: ���䴩�ҹ��ժ��ާ@�C\r\n���~: PID �� 17680 (PID �� 27824 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: ���䴩�ҹ��ժ��ާ@�C\r\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:304:5)\n[error] Failed to force kill process tree: Error: Command failed: taskkill /pid 17680 /T /F\n���~: �䤣��B�z�{�� \"17680\"�C\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:304:5)\n[info] Attempting to kill process on port: 5001\n[error] Failed to kill process on port 5001: Error: Command failed: netstat -ano | findstr LISTENING | findstr :5001",
        "signatures": {},
        "detailedLines": [
          {
            "text": "[info] before-quit",
            "lineNumber": 560
          },
          {
            "text": "[info] quit python_process.pid: 17680",
            "lineNumber": 561
          },
          {
            "text": "[info] Cleaning up Python process and all children { pid: 17680 }",
            "lineNumber": 562
          },
          {
            "text": "[info] Cleaning up Python process and all children { pid: 17680 }",
            "lineNumber": 563
          },
          {
            "text": "[info] Successfully sent SIGTERM to process tree",
            "lineNumber": 564
          },
          {
            "text": "[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 17680 /T /F",
            "lineNumber": 565
          },
          {
            "text": "���~: PID �� 56776 (PID �� 39004 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 566
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 567
          },
          {
            "text": "���~: PID �� 39004 (PID �� 22552 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 568
          },
          {
            "text": "��]: ���䴩�ҹ��ժ��ާ@�C\r",
            "lineNumber": 569
          },
          {
            "text": "���~: PID �� 54416 (PID �� 17680 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 570
          },
          {
            "text": "��]: ���䴩�ҹ��ժ��ާ@�C\r",
            "lineNumber": 571
          },
          {
            "text": "���~: PID �� 22552 (PID �� 17680 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 572
          },
          {
            "text": "��]: ���䴩�ҹ��ժ��ާ@�C\r",
            "lineNumber": 573
          },
          {
            "text": "���~: PID �� 17680 (PID �� 27824 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 574
          },
          {
            "text": "��]: ���䴩�ҹ��ժ��ާ@�C\r",
            "lineNumber": 575
          },
          {
            "lineNumber": 576
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 577
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 578
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 579
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 580
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 581
          },
          {
            "text": "    at ChildProcess._handle.onexit (node:internal/child_process:304:5)",
            "lineNumber": 582
          },
          {
            "text": "[error] Failed to force kill process tree: Error: Command failed: taskkill /pid 17680 /T /F",
            "lineNumber": 583
          },
          {
            "text": "���~: �䤣��B�z�{�� \"17680\"�C",
            "lineNumber": 584
          },
          {
            "lineNumber": 585
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 586
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 587
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 588
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 589
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 590
          },
          {
            "text": "    at ChildProcess._handle.onexit (node:internal/child_process:304:5)",
            "lineNumber": 591
          },
          {
            "text": "[info] Attempting to kill process on port: 5001",
            "lineNumber": 592
          },
          {
            "text": "[error] Failed to kill process on port 5001: Error: Command failed: netstat -ano | findstr LISTENING | findstr :5001",
            "lineNumber": 593
          }
        ]
      },
      "score": 0.3850812017917633
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\pass\\main-260120.log",
        "range": {
          "startPosition": {
            "line": 791
          },
          "endPosition": {
            "line": 819
          }
        },
        "contents": "���~: PID �� 58380 (PID �� 44152 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 44152 (PID �� 45320 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 496 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 45320 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 15676 (PID �� 49752 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at Socket.&lt;anonymous&gt; (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.&lt;anonymous&gt; (node:net:343:12)\n[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 15676 /T /F\n���~: PID �� 58380 (PID �� 44152 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 44152 (PID �� 45320 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 496 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 45320 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r",
        "signatures": {},
        "detailedLines": [
          {
            "text": "���~: PID �� 58380 (PID �� 44152 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 792
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 793
          },
          {
            "text": "���~: PID �� 44152 (PID �� 45320 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 794
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 795
          },
          {
            "text": "���~: PID �� 496 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 796
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 797
          },
          {
            "text": "���~: PID �� 45320 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 798
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 799
          },
          {
            "text": "���~: PID �� 15676 (PID �� 49752 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 800
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 801
          },
          {
            "lineNumber": 802
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 803
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 804
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 805
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 806
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 807
          },
          {
            "text": "    at Socket.&lt;anonymous&gt; (node:internal/child_process:456:11)",
            "lineNumber": 808
          },
          {
            "text": "    at Socket.emit (node:events:518:28)",
            "lineNumber": 809
          },
          {
            "text": "    at Pipe.&lt;anonymous&gt; (node:net:343:12)",
            "lineNumber": 810
          },
          {
            "text": "[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 15676 /T /F",
            "lineNumber": 811
          },
          {
            "text": "���~: PID �� 58380 (PID �� 44152 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 812
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 813
          },
          {
            "text": "���~: PID �� 44152 (PID �� 45320 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 814
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 815
          },
          {
            "text": "���~: PID �� 496 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 816
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 817
          },
          {
            "text": "���~: PID �� 45320 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 818
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 819
          }
        ]
      },
      "score": 0.3801085948944092
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\pass\\main-260120.log",
        "range": {
          "startPosition": {
            "line": 1134
          },
          "endPosition": {
            "line": 1161
          }
        },
        "contents": "��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 41096 (PID �� 26760 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 57212 (PID �� 26760 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 26760 (PID �� 54536 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:304:5)\n[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 26760 /T /F\n���~: PID �� 54108 (PID �� 52748 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 52748 (PID �� 57212 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �s���Q�ڡC\r\n���~: PID �� 41096 (PID �� 26760 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �s���Q�ڡC\r\n���~: PID �� 57212 (PID �� 26760 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 26760 (PID �� 54536 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n\n    at genericNodeError (node:internal/errors:984:15)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 1135
          },
          {
            "text": "���~: PID �� 41096 (PID �� 26760 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 1136
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 1137
          },
          {
            "text": "���~: PID �� 57212 (PID �� 26760 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 1138
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 1139
          },
          {
            "text": "���~: PID �� 26760 (PID �� 54536 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 1140
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 1141
          },
          {
            "lineNumber": 1142
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 1143
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 1144
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 1145
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 1146
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 1147
          },
          {
            "text": "    at ChildProcess._handle.onexit (node:internal/child_process:304:5)",
            "lineNumber": 1148
          },
          {
            "text": "[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 26760 /T /F",
            "lineNumber": 1149
          },
          {
            "text": "���~: PID �� 54108 (PID �� 52748 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 1150
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 1151
          },
          {
            "text": "���~: PID �� 52748 (PID �� 57212 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 1152
          },
          {
            "text": "��]: �s���Q�ڡC\r",
            "lineNumber": 1153
          },
          {
            "text": "���~: PID �� 41096 (PID �� 26760 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 1154
          },
          {
            "text": "��]: �s���Q�ڡC\r",
            "lineNumber": 1155
          },
          {
            "text": "���~: PID �� 57212 (PID �� 26760 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 1156
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 1157
          },
          {
            "text": "���~: PID �� 26760 (PID �� 54536 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 1158
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 1159
          },
          {
            "lineNumber": 1160
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 1161
          }
        ]
      },
      "score": 0.37810635566711426
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\pass\\main-260120.log",
        "range": {
          "startPosition": {
            "line": 841
          },
          "endPosition": {
            "line": 870
          }
        },
        "contents": "    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:304:5)\n[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 15676 /T /F\n���~: PID �� 58380 (PID �� 44152 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: ���䴩�ҹ��ժ��ާ@�C\r\n���~: PID �� 44152 (PID �� 45320 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: ���䴩�ҹ��ժ��ާ@�C\r\n���~: PID �� 496 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: ���䴩�ҹ��ժ��ާ@�C\r\n���~: PID �� 45320 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: ���䴩�ҹ��ժ��ާ@�C\r\n���~: PID �� 15676 (PID �� 49752 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: ���䴩�ҹ��ժ��ާ@�C\r\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:304:5)\n[error] Failed to force kill process tree: Error: Command failed: taskkill /pid 15676 /T /F\n���~: �䤣��B�z�{�� \"15676\"�C\n\n    at genericNodeError (node:internal/errors:984:15)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 843
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 844
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 845
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 846
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 847
          },
          {
            "text": "    at ChildProcess._handle.onexit (node:internal/child_process:304:5)",
            "lineNumber": 848
          },
          {
            "text": "[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 15676 /T /F",
            "lineNumber": 849
          },
          {
            "text": "���~: PID �� 58380 (PID �� 44152 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 850
          },
          {
            "text": "��]: ���䴩�ҹ��ժ��ާ@�C\r",
            "lineNumber": 851
          },
          {
            "text": "���~: PID �� 44152 (PID �� 45320 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 852
          },
          {
            "text": "��]: ���䴩�ҹ��ժ��ާ@�C\r",
            "lineNumber": 853
          },
          {
            "text": "���~: PID �� 496 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 854
          },
          {
            "text": "��]: ���䴩�ҹ��ժ��ާ@�C\r",
            "lineNumber": 855
          },
          {
            "text": "���~: PID �� 45320 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 856
          },
          {
            "text": "��]: ���䴩�ҹ��ժ��ާ@�C\r",
            "lineNumber": 857
          },
          {
            "text": "���~: PID �� 15676 (PID �� 49752 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 858
          },
          {
            "text": "��]: ���䴩�ҹ��ժ��ާ@�C\r",
            "lineNumber": 859
          },
          {
            "lineNumber": 860
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 861
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 862
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 863
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 864
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 865
          },
          {
            "text": "    at ChildProcess._handle.onexit (node:internal/child_process:304:5)",
            "lineNumber": 866
          },
          {
            "text": "[error] Failed to force kill process tree: Error: Command failed: taskkill /pid 15676 /T /F",
            "lineNumber": 867
          },
          {
            "text": "���~: �䤣��B�z�{�� \"15676\"�C",
            "lineNumber": 868
          },
          {
            "lineNumber": 869
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 870
          }
        ]
      },
      "score": 0.3729400038719177
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\electron\\main\\index.ts",
        "range": {
          "startPosition": {
            "line": 320
          },
          "endPosition": {
            "line": 1184,
            "column": 1
          }
        },
        "contents": "function registerIpcHandlers() {\nasync (event, email: string) =&gt; {\n\n  });\n  ipcMain.handle(\n    'execute-command',\n    async (event, command: string, email: string) =&gt; {\n      log.info('execute-command', command);\n      const { MCP_REMOTE_CONFIG_DIR } = getEmailFolderPath(email);\n\n      try {\n        const { spawn } = await import('child_process');\n\n        // Add --host parameter\n        const commandWithHost = &#96;${command} --debug --host dev.eigent.ai/api/oauth/notion/callback?code=1&#96;;\n        // const commandWithHost = &#96;${command}&#96;;\n\n        log.info(' start execute command:', commandWithHost);\n\n        // Parse command and arguments\n        const [cmd, ...args] = commandWithHost.split(' ');\n        log.info('start execute command:', commandWithHost.split(' '));\n        console.log(cmd, args);\n        return new Promise((resolve) =&gt; {\n          const child = spawn(cmd, args, {\n            cwd: process.cwd(),\n            env: { ...process.env, MCP_REMOTE_CONFIG_DIR },\n            stdio: ['pipe', 'pipe', 'pipe'],\n          });\n\n          let stdout = '';\n          let stderr = '';\n\n          // Realtime listen standard output\n          child.stdout.on('data', (data) =&gt; {\n            const output = data.toString();\n            stdout += output;\n            log.info('Real-time output:', output.trim());\n          });\n\n          // Realtime listen error output\n          child.stderr.on\n\n        }\n    }\n\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 321,
                "column": 1
              },
              "endPosition": {
                "line": 322,
                "column": 3
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "function registerIpcHandlers() {",
            "lineNumber": 321,
            "isSignature": true
          },
          {
            "text": "async (event, email: string) =&gt; {",
            "lineNumber": 370
          },
          {
            "lineNumber": 371
          },
          {
            "text": "  });",
            "lineNumber": 372
          },
          {
            "text": "  ipcMain.handle(",
            "lineNumber": 373
          },
          {
            "text": "    'execute-command',",
            "lineNumber": 374
          },
          {
            "text": "    async (event, command: string, email: string) =&gt; {",
            "lineNumber": 375
          },
          {
            "text": "      log.info('execute-command', command);",
            "lineNumber": 376
          },
          {
            "text": "      const { MCP_REMOTE_CONFIG_DIR } = getEmailFolderPath(email);",
            "lineNumber": 377
          },
          {
            "lineNumber": 378
          },
          {
            "text": "      try {",
            "lineNumber": 379
          },
          {
            "text": "        const { spawn } = await import('child_process');",
            "lineNumber": 380
          },
          {
            "lineNumber": 381
          },
          {
            "text": "        // Add --host parameter",
            "lineNumber": 382
          },
          {
            "text": "        const commandWithHost = &#96;${command} --debug --host dev.eigent.ai/api/oauth/notion/callback?code=1&#96;;",
            "lineNumber": 383
          },
          {
            "text": "        // const commandWithHost = &#96;${command}&#96;;",
            "lineNumber": 384
          },
          {
            "lineNumber": 385
          },
          {
            "text": "        log.info(' start execute command:', commandWithHost);",
            "lineNumber": 386
          },
          {
            "lineNumber": 387
          },
          {
            "text": "        // Parse command and arguments",
            "lineNumber": 388
          },
          {
            "text": "        const [cmd, ...args] = commandWithHost.split(' ');",
            "lineNumber": 389
          },
          {
            "text": "        log.info('start execute command:', commandWithHost.split(' '));",
            "lineNumber": 390
          },
          {
            "text": "        console.log(cmd, args);",
            "lineNumber": 391
          },
          {
            "text": "        return new Promise((resolve) =&gt; {",
            "lineNumber": 392
          },
          {
            "text": "          const child = spawn(cmd, args, {",
            "lineNumber": 393
          },
          {
            "text": "            cwd: process.cwd(),",
            "lineNumber": 394
          },
          {
            "text": "            env: { ...process.env, MCP_REMOTE_CONFIG_DIR },",
            "lineNumber": 395
          },
          {
            "text": "            stdio: ['pipe', 'pipe', 'pipe'],",
            "lineNumber": 396
          },
          {
            "text": "          });",
            "lineNumber": 397
          },
          {
            "lineNumber": 398
          },
          {
            "text": "          let stdout = '';",
            "lineNumber": 399
          },
          {
            "text": "          let stderr = '';",
            "lineNumber": 400
          },
          {
            "lineNumber": 401
          },
          {
            "text": "          // Realtime listen standard output",
            "lineNumber": 402
          },
          {
            "text": "          child.stdout.on('data', (data) =&gt; {",
            "lineNumber": 403
          },
          {
            "text": "            const output = data.toString();",
            "lineNumber": 404
          },
          {
            "text": "            stdout += output;",
            "lineNumber": 405
          },
          {
            "text": "            log.info('Real-time output:', output.trim());",
            "lineNumber": 406
          },
          {
            "text": "          });",
            "lineNumber": 407
          },
          {
            "lineNumber": 408
          },
          {
            "text": "          // Realtime listen error output",
            "lineNumber": 409
          },
          {
            "text": "          child.stderr.on",
            "lineNumber": 410
          },
          {
            "lineNumber": 434
          },
          {
            "text": "        }",
            "lineNumber": 447
          },
          {
            "text": "    }",
            "lineNumber": 452
          },
          {
            "lineNumber": 453
          },
          {
            "text": "}",
            "lineNumber": 1185,
            "isSignature": true
          }
        ]
      },
      "score": 0.36972343921661377
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\pass\\main-260120.log",
        "range": {
          "startPosition": {
            "line": 736
          },
          "endPosition": {
            "line": 763
          }
        },
        "contents": "���~: PID �� 496 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �s���Q�ڡC\r\n���~: PID �� 45320 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �s���Q�ڡC\r\n���~: PID �� 15676 (PID �� 49752 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �s���Q�ڡC\r\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:304:5)\n[info] Successfully sent SIGTERM to process tree\n[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 15676 /T /F\n���~: PID �� 58380 (PID �� 44152 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 44152 (PID �� 45320 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 496 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 45320 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 15676 (PID �� 49752 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n\n    at genericNodeError (node:internal/errors:984:15)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "���~: PID �� 496 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 737
          },
          {
            "text": "��]: �s���Q�ڡC\r",
            "lineNumber": 738
          },
          {
            "text": "���~: PID �� 45320 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 739
          },
          {
            "text": "��]: �s���Q�ڡC\r",
            "lineNumber": 740
          },
          {
            "text": "���~: PID �� 15676 (PID �� 49752 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 741
          },
          {
            "text": "��]: �s���Q�ڡC\r",
            "lineNumber": 742
          },
          {
            "lineNumber": 743
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 744
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 745
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 746
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 747
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 748
          },
          {
            "text": "    at ChildProcess._handle.onexit (node:internal/child_process:304:5)",
            "lineNumber": 749
          },
          {
            "text": "[info] Successfully sent SIGTERM to process tree",
            "lineNumber": 750
          },
          {
            "text": "[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 15676 /T /F",
            "lineNumber": 751
          },
          {
            "text": "���~: PID �� 58380 (PID �� 44152 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 752
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 753
          },
          {
            "text": "���~: PID �� 44152 (PID �� 45320 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 754
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 755
          },
          {
            "text": "���~: PID �� 496 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 756
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 757
          },
          {
            "text": "���~: PID �� 45320 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 758
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 759
          },
          {
            "text": "���~: PID �� 15676 (PID �� 49752 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 760
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 761
          },
          {
            "lineNumber": 762
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 763
          }
        ]
      },
      "score": 0.36943769454956055
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\pass\\main-260120.log",
        "range": {
          "startPosition": {
            "line": 710
          },
          "endPosition": {
            "line": 739
          }
        },
        "contents": "[info] before-quit\n[info] quit python_process.pid: 15676\n[info] Cleaning up Python process and all children { pid: 15676 }\n[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 15676 /T /F\n���~: PID �� 58380 (PID �� 44152 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 44152 (PID �� 45320 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 496 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 45320 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 15676 (PID �� 49752 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:304:5)\n[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 15676 /T /F\n���~: PID �� 58380 (PID �� 44152 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 44152 (PID �� 45320 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 496 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �s���Q�ڡC\r\n���~: PID �� 45320 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
        "signatures": {},
        "detailedLines": [
          {
            "text": "[info] before-quit",
            "lineNumber": 711
          },
          {
            "text": "[info] quit python_process.pid: 15676",
            "lineNumber": 712
          },
          {
            "text": "[info] Cleaning up Python process and all children { pid: 15676 }",
            "lineNumber": 713
          },
          {
            "text": "[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 15676 /T /F",
            "lineNumber": 714
          },
          {
            "text": "���~: PID �� 58380 (PID �� 44152 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 715
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 716
          },
          {
            "text": "���~: PID �� 44152 (PID �� 45320 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 717
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 718
          },
          {
            "text": "���~: PID �� 496 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 719
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 720
          },
          {
            "text": "���~: PID �� 45320 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 721
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 722
          },
          {
            "text": "���~: PID �� 15676 (PID �� 49752 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 723
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 724
          },
          {
            "lineNumber": 725
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 726
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 727
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 728
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 729
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 730
          },
          {
            "text": "    at ChildProcess._handle.onexit (node:internal/child_process:304:5)",
            "lineNumber": 731
          },
          {
            "text": "[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 15676 /T /F",
            "lineNumber": 732
          },
          {
            "text": "���~: PID �� 58380 (PID �� 44152 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 733
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 734
          },
          {
            "text": "���~: PID �� 44152 (PID �� 45320 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 735
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 736
          },
          {
            "text": "���~: PID �� 496 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 737
          },
          {
            "text": "��]: �s���Q�ڡC\r",
            "lineNumber": 738
          },
          {
            "text": "���~: PID �� 45320 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 739
          }
        ]
      },
      "score": 0.369143009185791
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\pass\\main-260120.log",
        "range": {
          "startPosition": {
            "line": 3932
          },
          "endPosition": {
            "line": 3964
          }
        },
        "contents": "���~: PID �� 25516 (PID �� 22488 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at Socket.&lt;anonymous&gt; (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.&lt;anonymous&gt; (node:net:343:12)\n[error] Failed to force kill process tree: Error: Command failed: taskkill /pid 25516 /T /F\n���~: �䤣��B�z�{�� \"25516\"�C\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at Socket.&lt;anonymous&gt; (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.&lt;anonymous&gt; (node:net:343:12)\n[info] Attempting to kill process on port: 5001\n[error] Failed to kill process on port 5001: Error: Command failed: netstat -ano | findstr LISTENING | findstr :5001\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:304:5)\n[info] All cleanup completed, exiting...",
        "signatures": {},
        "detailedLines": [
          {
            "text": "���~: PID �� 25516 (PID �� 22488 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 3933
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 3934
          },
          {
            "lineNumber": 3935
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 3936
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 3937
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 3938
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 3939
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 3940
          },
          {
            "text": "    at Socket.&lt;anonymous&gt; (node:internal/child_process:456:11)",
            "lineNumber": 3941
          },
          {
            "text": "    at Socket.emit (node:events:518:28)",
            "lineNumber": 3942
          },
          {
            "text": "    at Pipe.&lt;anonymous&gt; (node:net:343:12)",
            "lineNumber": 3943
          },
          {
            "text": "[error] Failed to force kill process tree: Error: Command failed: taskkill /pid 25516 /T /F",
            "lineNumber": 3944
          },
          {
            "text": "���~: �䤣��B�z�{�� \"25516\"�C",
            "lineNumber": 3945
          },
          {
            "lineNumber": 3946
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 3947
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 3948
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 3949
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 3950
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 3951
          },
          {
            "text": "    at Socket.&lt;anonymous&gt; (node:internal/child_process:456:11)",
            "lineNumber": 3952
          },
          {
            "text": "    at Socket.emit (node:events:518:28)",
            "lineNumber": 3953
          },
          {
            "text": "    at Pipe.&lt;anonymous&gt; (node:net:343:12)",
            "lineNumber": 3954
          },
          {
            "text": "[info] Attempting to kill process on port: 5001",
            "lineNumber": 3955
          },
          {
            "text": "[error] Failed to kill process on port 5001: Error: Command failed: netstat -ano | findstr LISTENING | findstr :5001",
            "lineNumber": 3956
          },
          {
            "lineNumber": 3957
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 3958
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 3959
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 3960
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 3961
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 3962
          },
          {
            "text": "    at ChildProcess._handle.onexit (node:internal/child_process:304:5)",
            "lineNumber": 3963
          },
          {
            "text": "[info] All cleanup completed, exiting...",
            "lineNumber": 3964
          }
        ]
      },
      "score": 0.368280291557312
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\pass\\main-260120.log",
        "range": {
          "startPosition": {
            "line": 761
          },
          "endPosition": {
            "line": 793
          }
        },
        "contents": "    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at Socket.&lt;anonymous&gt; (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.&lt;anonymous&gt; (node:net:343:12)\n[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 15676 /T /F\n���~: PID �� 58380 (PID �� 44152 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 44152 (PID �� 45320 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 496 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 45320 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 15676 (PID �� 49752 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at Socket.&lt;anonymous&gt; (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.&lt;anonymous&gt; (node:net:343:12)\n[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 15676 /T /F\n���~: PID �� 58380 (PID �� 44152 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 763
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 764
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 765
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 766
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 767
          },
          {
            "text": "    at Socket.&lt;anonymous&gt; (node:internal/child_process:456:11)",
            "lineNumber": 768
          },
          {
            "text": "    at Socket.emit (node:events:518:28)",
            "lineNumber": 769
          },
          {
            "text": "    at Pipe.&lt;anonymous&gt; (node:net:343:12)",
            "lineNumber": 770
          },
          {
            "text": "[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 15676 /T /F",
            "lineNumber": 771
          },
          {
            "text": "���~: PID �� 58380 (PID �� 44152 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 772
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 773
          },
          {
            "text": "���~: PID �� 44152 (PID �� 45320 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 774
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 775
          },
          {
            "text": "���~: PID �� 496 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 776
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 777
          },
          {
            "text": "���~: PID �� 45320 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 778
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 779
          },
          {
            "text": "���~: PID �� 15676 (PID �� 49752 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 780
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 781
          },
          {
            "lineNumber": 782
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 783
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 784
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 785
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 786
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 787
          },
          {
            "text": "    at Socket.&lt;anonymous&gt; (node:internal/child_process:456:11)",
            "lineNumber": 788
          },
          {
            "text": "    at Socket.emit (node:events:518:28)",
            "lineNumber": 789
          },
          {
            "text": "    at Pipe.&lt;anonymous&gt; (node:net:343:12)",
            "lineNumber": 790
          },
          {
            "text": "[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 15676 /T /F",
            "lineNumber": 791
          },
          {
            "text": "���~: PID �� 58380 (PID �� 44152 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 792
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 793
          }
        ]
      },
      "score": 0.3667987585067749
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\src\\store\\chatStore.ts",
        "range": {
          "startPosition": {
            "line": 162
          },
          "endPosition": {
            "line": 2594,
            "column": 1
          }
        },
        "contents": "const chatStore = \n(set, get) =&gt; (\nasync (taskId: string, type?: string, shareToken?: string, delayTime?: number, messageContent?: string, messageAttaches?: File[]) =&gt; {\n\nasync onmessage(event: any) {\n\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tif (agentMessages.step === \"error\") {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconsole.error('Model error:', agentMessages.data);\n\n\t\t\t\t\t\t\t// Validate that agentMessages.data exists before processing\n\t\t\t\t\t\t\tif (agentMessages.data === undefined || agentMessages.data === null) {\n\t\t\t\t\t\t\t\tthrow new Error('Invalid error message format: missing data');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Safely extract error message with fallback chain\n\t\t\t\t\t\t\tconst errorMessage = agentMessages.data?.message ||\n\t\t\t\t\t\t\t\t(typeof agentMessages.data === 'string' ? agentMessages.data : null) ||\n\t\t\t\t\t\t\t\t'An error occurred while processing your request';\n\n\t\t\t\t\t\t\t// Mark all incomplete tasks as failed\n\t\t\t\t\t\t\tlet taskRunning = [...tasks[currentTaskId].taskRunning];\n\t\t\t\t\t\t\tlet taskAssigning = [...tasks[currentTaskId].taskAssigning];\n\n\t\t\t\t\t\t\t// Update taskRunning - mark non-completed tasks as failed\n\t\t\t\t\t\t\ttaskRunning = taskRunning.map((task) =&gt; {\n\t\t\t\t\t\t\t\tif (task.status !== \"completed\" &amp;&amp; task.status !== \"failed\") {\n\t\t\t\t\t\t\t\t\ttask.status = \"failed\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn task;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// Update taskAssigning - mark non-completed tasks as failed\n\t\t\t\t\t\t\ttaskAssigning = taskAssigning.map((agent) =&gt; {\n\t\t\t\t\t\t\t\tagent.tasks = agent.tasks.map((task) =&gt; {\n\t\t\t\t\t\t\t\t\tif (task.status !== \"completed\" &amp;&amp; task.status !== \"failed\") {\n\t\t\t\t\t\t\t\t\t\ttask.status = \"failed\";\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn task;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn agent;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// Apply the updates\n\t\t\t\t\t\t\tsetTaskRunning(currentTaskId, taskRunning);\n\t\t\t\t\t\t\tsetTaskAssigning(currentTaskId, taskAssigning);\n\n\t\t\t\t\t\t\t// Complete the current task with error status\n\t\t\t\t\t\t\tsetStatus(currentTaskId, 'finished');\n\t\t\t\t\t\t\tsetIsPending(currentTaskId, false);\n\n\t\t\t\t\t\t\t// Add error message to the current task\n\t\t\t\t\t\t\taddMessages(currentTaskId, {\n\t\t\t\t\t\t\t\tid: generateUniqueId(),\n\t\t\t\t\t\t\t\trole: \"agent\",\n\t\t\t\t\t\t\t\tcontent: &#96;❌ **Error**: ${errorMessage}&#96;,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tuploadLog(currentTaskId, type)\n\n\t\t\t\t\t\t\t// Stop the workforce\n\t\t\t\t\t\t\ttry\n\t\t\t\t}\n\n\t\t}\n)\n;",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 163,
                "column": 1
              },
              "endPosition": {
                "line": 163,
                "column": 7
              }
            },
            {
              "startPosition": {
                "line": 163,
                "column": 7
              },
              "endPosition": {
                "line": 163,
                "column": 19
              }
            },
            {
              "startPosition": {
                "line": 163,
                "column": 53
              },
              "endPosition": {
                "line": 163,
                "column": 53
              }
            },
            {
              "startPosition": {
                "line": 164,
                "column": 2
              },
              "endPosition": {
                "line": 164,
                "column": 17
              }
            },
            {
              "startPosition": {
                "line": 331,
                "column": 14
              },
              "endPosition": {
                "line": 332,
                "column": 4
              }
            },
            {
              "startPosition": {
                "line": 586,
                "column": 4
              },
              "endPosition": {
                "line": 586,
                "column": 4
              }
            },
            {
              "startPosition": {
                "line": 612,
                "column": 5
              },
              "endPosition": {
                "line": 613,
                "column": 6
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "const chatStore = ",
            "lineNumber": 163
          },
          {
            "text": "(set, get) =&gt; (",
            "lineNumber": 164
          },
          {
            "text": "async (taskId: string, type?: string, shareToken?: string, delayTime?: number, messageContent?: string, messageAttaches?: File[]) =&gt; {",
            "lineNumber": 331
          },
          {
            "lineNumber": 586
          },
          {
            "text": "async onmessage(event: any) {",
            "lineNumber": 612
          },
          {
            "lineNumber": 1462
          },
          {
            "text": "\t\t\t\t\t\treturn",
            "lineNumber": 1463
          },
          {
            "text": "\t\t\t\t\t}",
            "lineNumber": 1464
          },
          {
            "lineNumber": 1465
          },
          {
            "text": "\t\t\t\t\tif (agentMessages.step === \"error\") {",
            "lineNumber": 1466
          },
          {
            "text": "\t\t\t\t\t\ttry {",
            "lineNumber": 1467
          },
          {
            "text": "\t\t\t\t\t\t\tconsole.error('Model error:', agentMessages.data);",
            "lineNumber": 1468
          },
          {
            "lineNumber": 1469
          },
          {
            "text": "\t\t\t\t\t\t\t// Validate that agentMessages.data exists before processing",
            "lineNumber": 1470
          },
          {
            "text": "\t\t\t\t\t\t\tif (agentMessages.data === undefined || agentMessages.data === null) {",
            "lineNumber": 1471
          },
          {
            "text": "\t\t\t\t\t\t\t\tthrow new Error('Invalid error message format: missing data');",
            "lineNumber": 1472
          },
          {
            "text": "\t\t\t\t\t\t\t}",
            "lineNumber": 1473
          },
          {
            "lineNumber": 1474
          },
          {
            "text": "\t\t\t\t\t\t\t// Safely extract error message with fallback chain",
            "lineNumber": 1475
          },
          {
            "text": "\t\t\t\t\t\t\tconst errorMessage = agentMessages.data?.message ||",
            "lineNumber": 1476
          },
          {
            "text": "\t\t\t\t\t\t\t\t(typeof agentMessages.data === 'string' ? agentMessages.data : null) ||",
            "lineNumber": 1477
          },
          {
            "text": "\t\t\t\t\t\t\t\t'An error occurred while processing your request';",
            "lineNumber": 1478
          },
          {
            "lineNumber": 1479
          },
          {
            "text": "\t\t\t\t\t\t\t// Mark all incomplete tasks as failed",
            "lineNumber": 1480
          },
          {
            "text": "\t\t\t\t\t\t\tlet taskRunning = [...tasks[currentTaskId].taskRunning];",
            "lineNumber": 1481
          },
          {
            "text": "\t\t\t\t\t\t\tlet taskAssigning = [...tasks[currentTaskId].taskAssigning];",
            "lineNumber": 1482
          },
          {
            "lineNumber": 1483
          },
          {
            "text": "\t\t\t\t\t\t\t// Update taskRunning - mark non-completed tasks as failed",
            "lineNumber": 1484
          },
          {
            "text": "\t\t\t\t\t\t\ttaskRunning = taskRunning.map((task) =&gt; {",
            "lineNumber": 1485
          },
          {
            "text": "\t\t\t\t\t\t\t\tif (task.status !== \"completed\" &amp;&amp; task.status !== \"failed\") {",
            "lineNumber": 1486
          },
          {
            "text": "\t\t\t\t\t\t\t\t\ttask.status = \"failed\";",
            "lineNumber": 1487
          },
          {
            "text": "\t\t\t\t\t\t\t\t}",
            "lineNumber": 1488
          },
          {
            "text": "\t\t\t\t\t\t\t\treturn task;",
            "lineNumber": 1489
          },
          {
            "text": "\t\t\t\t\t\t\t});",
            "lineNumber": 1490
          },
          {
            "lineNumber": 1491
          },
          {
            "text": "\t\t\t\t\t\t\t// Update taskAssigning - mark non-completed tasks as failed",
            "lineNumber": 1492
          },
          {
            "text": "\t\t\t\t\t\t\ttaskAssigning = taskAssigning.map((agent) =&gt; {",
            "lineNumber": 1493
          },
          {
            "text": "\t\t\t\t\t\t\t\tagent.tasks = agent.tasks.map((task) =&gt; {",
            "lineNumber": 1494
          },
          {
            "text": "\t\t\t\t\t\t\t\t\tif (task.status !== \"completed\" &amp;&amp; task.status !== \"failed\") {",
            "lineNumber": 1495
          },
          {
            "text": "\t\t\t\t\t\t\t\t\t\ttask.status = \"failed\";",
            "lineNumber": 1496
          },
          {
            "text": "\t\t\t\t\t\t\t\t\t}",
            "lineNumber": 1497
          },
          {
            "text": "\t\t\t\t\t\t\t\t\treturn task;",
            "lineNumber": 1498
          },
          {
            "text": "\t\t\t\t\t\t\t\t});",
            "lineNumber": 1499
          },
          {
            "text": "\t\t\t\t\t\t\t\treturn agent;",
            "lineNumber": 1500
          },
          {
            "text": "\t\t\t\t\t\t\t});",
            "lineNumber": 1501
          },
          {
            "lineNumber": 1502
          },
          {
            "text": "\t\t\t\t\t\t\t// Apply the updates",
            "lineNumber": 1503
          },
          {
            "text": "\t\t\t\t\t\t\tsetTaskRunning(currentTaskId, taskRunning);",
            "lineNumber": 1504
          },
          {
            "text": "\t\t\t\t\t\t\tsetTaskAssigning(currentTaskId, taskAssigning);",
            "lineNumber": 1505
          },
          {
            "lineNumber": 1506
          },
          {
            "text": "\t\t\t\t\t\t\t// Complete the current task with error status",
            "lineNumber": 1507
          },
          {
            "text": "\t\t\t\t\t\t\tsetStatus(currentTaskId, 'finished');",
            "lineNumber": 1508
          },
          {
            "text": "\t\t\t\t\t\t\tsetIsPending(currentTaskId, false);",
            "lineNumber": 1509
          },
          {
            "lineNumber": 1510
          },
          {
            "text": "\t\t\t\t\t\t\t// Add error message to the current task",
            "lineNumber": 1511
          },
          {
            "text": "\t\t\t\t\t\t\taddMessages(currentTaskId, {",
            "lineNumber": 1512
          },
          {
            "text": "\t\t\t\t\t\t\t\tid: generateUniqueId(),",
            "lineNumber": 1513
          },
          {
            "text": "\t\t\t\t\t\t\t\trole: \"agent\",",
            "lineNumber": 1514
          },
          {
            "text": "\t\t\t\t\t\t\t\tcontent: &#96;❌ **Error**: ${errorMessage}&#96;,",
            "lineNumber": 1515
          },
          {
            "text": "\t\t\t\t\t\t\t});",
            "lineNumber": 1516
          },
          {
            "text": "\t\t\t\t\t\t\tuploadLog(currentTaskId, type)",
            "lineNumber": 1517
          },
          {
            "lineNumber": 1518
          },
          {
            "text": "\t\t\t\t\t\t\t// Stop the workforce",
            "lineNumber": 1519
          },
          {
            "text": "\t\t\t\t\t\t\ttry",
            "lineNumber": 1520
          },
          {
            "text": "\t\t\t\t}",
            "lineNumber": 1836
          },
          {
            "lineNumber": 1886
          },
          {
            "text": "\t\t}",
            "lineNumber": 1888
          },
          {
            "text": ")",
            "lineNumber": 2594
          },
          {
            "text": ";",
            "lineNumber": 2595
          }
        ]
      },
      "score": 0.3645414113998413
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\pass\\main-260120.log",
        "range": {
          "startPosition": {
            "line": 817
          },
          "endPosition": {
            "line": 843
          }
        },
        "contents": "���~: PID �� 45320 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 15676 (PID �� 49752 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at Socket.&lt;anonymous&gt; (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.&lt;anonymous&gt; (node:net:343:12)\n[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 15676 /T /F\n���~: PID �� 58380 (PID �� 44152 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 44152 (PID �� 45320 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 496 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 45320 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 15676 (PID �� 49752 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n\n    at genericNodeError (node:internal/errors:984:15)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "���~: PID �� 45320 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 818
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 819
          },
          {
            "text": "���~: PID �� 15676 (PID �� 49752 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 820
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 821
          },
          {
            "lineNumber": 822
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 823
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 824
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 825
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 826
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 827
          },
          {
            "text": "    at Socket.&lt;anonymous&gt; (node:internal/child_process:456:11)",
            "lineNumber": 828
          },
          {
            "text": "    at Socket.emit (node:events:518:28)",
            "lineNumber": 829
          },
          {
            "text": "    at Pipe.&lt;anonymous&gt; (node:net:343:12)",
            "lineNumber": 830
          },
          {
            "text": "[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 15676 /T /F",
            "lineNumber": 831
          },
          {
            "text": "���~: PID �� 58380 (PID �� 44152 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 832
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 833
          },
          {
            "text": "���~: PID �� 44152 (PID �� 45320 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 834
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 835
          },
          {
            "text": "���~: PID �� 496 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 836
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 837
          },
          {
            "text": "���~: PID �� 45320 (PID �� 15676 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 838
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 839
          },
          {
            "text": "���~: PID �� 15676 (PID �� 49752 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 840
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 841
          },
          {
            "lineNumber": 842
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 843
          }
        ]
      },
      "score": 0.36383193731307983
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\pass\\main-260120.log",
        "range": {
          "startPosition": {
            "line": 1190
          },
          "endPosition": {
            "line": 1221
          }
        },
        "contents": "���~: PID �� 54108 (PID �� 52748 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: ���䴩�ҹ��ժ��ާ@�C\r\n���~: PID �� 52748 (PID �� 57212 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: ���䴩�ҹ��ժ��ާ@�C\r\n���~: PID �� 41096 (PID �� 26760 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: ���䴩�ҹ��ժ��ާ@�C\r\n���~: PID �� 57212 (PID �� 26760 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: ���䴩�ҹ��ժ��ާ@�C\r\n���~: PID �� 26760 (PID �� 54536 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: ���䴩�ҹ��ժ��ާ@�C\r\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:304:5)\n[error] Failed to force kill process tree: Error: Command failed: taskkill /pid 26760 /T /F\n���~: �䤣��B�z�{�� \"26760\"�C\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:304:5)\n[info] Attempting to kill process on port: 5001\n[error] Failed to force kill process tree: Error: Command failed: taskkill /pid 26760 /T /F\n���~: �䤣��B�z�{�� \"26760\"�C\n\n    at genericNodeError (node:internal/errors:984:15)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "���~: PID �� 54108 (PID �� 52748 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 1191
          },
          {
            "text": "��]: ���䴩�ҹ��ժ��ާ@�C\r",
            "lineNumber": 1192
          },
          {
            "text": "���~: PID �� 52748 (PID �� 57212 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 1193
          },
          {
            "text": "��]: ���䴩�ҹ��ժ��ާ@�C\r",
            "lineNumber": 1194
          },
          {
            "text": "���~: PID �� 41096 (PID �� 26760 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 1195
          },
          {
            "text": "��]: ���䴩�ҹ��ժ��ާ@�C\r",
            "lineNumber": 1196
          },
          {
            "text": "���~: PID �� 57212 (PID �� 26760 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 1197
          },
          {
            "text": "��]: ���䴩�ҹ��ժ��ާ@�C\r",
            "lineNumber": 1198
          },
          {
            "text": "���~: PID �� 26760 (PID �� 54536 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 1199
          },
          {
            "text": "��]: ���䴩�ҹ��ժ��ާ@�C\r",
            "lineNumber": 1200
          },
          {
            "lineNumber": 1201
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 1202
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 1203
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 1204
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 1205
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 1206
          },
          {
            "text": "    at ChildProcess._handle.onexit (node:internal/child_process:304:5)",
            "lineNumber": 1207
          },
          {
            "text": "[error] Failed to force kill process tree: Error: Command failed: taskkill /pid 26760 /T /F",
            "lineNumber": 1208
          },
          {
            "text": "���~: �䤣��B�z�{�� \"26760\"�C",
            "lineNumber": 1209
          },
          {
            "lineNumber": 1210
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 1211
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 1212
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 1213
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 1214
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 1215
          },
          {
            "text": "    at ChildProcess._handle.onexit (node:internal/child_process:304:5)",
            "lineNumber": 1216
          },
          {
            "text": "[info] Attempting to kill process on port: 5001",
            "lineNumber": 1217
          },
          {
            "text": "[error] Failed to force kill process tree: Error: Command failed: taskkill /pid 26760 /T /F",
            "lineNumber": 1218
          },
          {
            "text": "���~: �䤣��B�z�{�� \"26760\"�C",
            "lineNumber": 1219
          },
          {
            "lineNumber": 1220
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 1221
          }
        ]
      },
      "score": 0.36201566457748413
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\electron\\main\\init.ts",
        "range": {
          "startPosition": {
            "line": 119
          },
          "endPosition": {
            "line": 474,
            "column": 1
          }
        },
        "contents": "export async function startBackend(setPort?: (port: number) =&gt; void): Promise&lt;any&gt; {\nasync (resolve, reject) =&gt; {\nconst initialDelay = () =&gt; {\n\n            }\n        }, 2000);\n\n        const killBackendProcess = (proc: any) =&gt; {\n            if (!proc || !proc.pid) return;\n\n            log.info(&#96;Killing backend process ${proc.pid} and its children...&#96;);\n            try {\n                if (process.platform === 'win32') {\n                    spawn('taskkill', ['/pid', proc.pid.toString(), '/T', '/F']);\n                } else {\n                    try {\n                        process.kill(-proc.pid, 'SIGTERM');\n                        setTimeout(() =&gt; {\n                            try {\n                                process.kill(-proc.pid, 'SIGKILL');\n                            } catch (e) { }\n                        }, 1000);\n                    } catch (e) {\n                        log.error(&#96;Failed to kill process group: ${e}&#96;);\n                        proc.kill('SIGKILL');\n                    }\n                }\n            } catch (e) {\n                log.error(&#96;Failed to kill backend process: ${e}&#96;);\n            }\n        };\n\n        const pollHealthEndpoint = (): void =&gt;\n;\n    }\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 120,
                "column": 1
              },
              "endPosition": {
                "line": 120,
                "column": 8
              }
            },
            {
              "startPosition": {
                "line": 120,
                "column": 8
              },
              "endPosition": {
                "line": 121,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 192,
                "column": 24
              },
              "endPosition": {
                "line": 193,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "export async function startBackend(setPort?: (port: number) =&gt; void): Promise&lt;any&gt; {",
            "lineNumber": 120,
            "isSignature": true
          },
          {
            "text": "async (resolve, reject) =&gt; {",
            "lineNumber": 192
          },
          {
            "text": "const initialDelay = () =&gt; {",
            "lineNumber": 318
          },
          {
            "lineNumber": 321
          },
          {
            "text": "            }",
            "lineNumber": 322
          },
          {
            "text": "        }, 2000);",
            "lineNumber": 323
          },
          {
            "lineNumber": 324
          },
          {
            "text": "        const killBackendProcess = (proc: any) =&gt; {",
            "lineNumber": 325
          },
          {
            "text": "            if (!proc || !proc.pid) return;",
            "lineNumber": 326
          },
          {
            "lineNumber": 327
          },
          {
            "text": "            log.info(&#96;Killing backend process ${proc.pid} and its children...&#96;);",
            "lineNumber": 328
          },
          {
            "text": "            try {",
            "lineNumber": 329
          },
          {
            "text": "                if (process.platform === 'win32') {",
            "lineNumber": 330
          },
          {
            "text": "                    spawn('taskkill', ['/pid', proc.pid.toString(), '/T', '/F']);",
            "lineNumber": 331
          },
          {
            "text": "                } else {",
            "lineNumber": 332
          },
          {
            "text": "                    try {",
            "lineNumber": 333
          },
          {
            "text": "                        process.kill(-proc.pid, 'SIGTERM');",
            "lineNumber": 334
          },
          {
            "text": "                        setTimeout(() =&gt; {",
            "lineNumber": 335
          },
          {
            "text": "                            try {",
            "lineNumber": 336
          },
          {
            "text": "                                process.kill(-proc.pid, 'SIGKILL');",
            "lineNumber": 337
          },
          {
            "text": "                            } catch (e) { }",
            "lineNumber": 338
          },
          {
            "text": "                        }, 1000);",
            "lineNumber": 339
          },
          {
            "text": "                    } catch (e) {",
            "lineNumber": 340
          },
          {
            "text": "                        log.error(&#96;Failed to kill process group: ${e}&#96;);",
            "lineNumber": 341
          },
          {
            "text": "                        proc.kill('SIGKILL');",
            "lineNumber": 342
          },
          {
            "text": "                    }",
            "lineNumber": 343
          },
          {
            "text": "                }",
            "lineNumber": 344
          },
          {
            "text": "            } catch (e) {",
            "lineNumber": 345
          },
          {
            "text": "                log.error(&#96;Failed to kill backend process: ${e}&#96;);",
            "lineNumber": 346
          },
          {
            "text": "            }",
            "lineNumber": 347
          },
          {
            "text": "        };",
            "lineNumber": 348
          },
          {
            "lineNumber": 349
          },
          {
            "text": "        const pollHealthEndpoint = (): void =&gt;",
            "lineNumber": 350
          },
          {
            "text": ";",
            "lineNumber": 404
          },
          {
            "text": "    }",
            "lineNumber": 451
          },
          {
            "text": "}",
            "lineNumber": 475,
            "isSignature": true
          }
        ]
      },
      "score": 0.3599540889263153
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\app\\utils\\toolkit\\terminal_toolkit.py",
        "range": {
          "startPosition": {
            "line": 18
          },
          "endPosition": {
            "line": 181,
            "column": 35
          }
        },
        "contents": "@auto_listen_toolkit(BaseTerminalToolkit)\nclass TerminalToolkit(BaseTerminalToolkit, AbstractToolkit):\n\n\n    def shell_exec(\n        self,\n        command: str,\n        id: str | None = None,\n        block: bool = True,\n        timeout: float = 20.0,\n    ) -&gt; str:\n        r\"\"\"Executes a shell command in blocking or non-blocking mode.\n\n        Args:\n            command (str): The shell command to execute.\n            id (str, optional): A unique identifier for the command's session.\n                If not provided, a unique ID will be automatically generated.\n            block (bool, optional): Determines the execution mode. Defaults to True.\n            timeout (float, optional): Timeout in seconds for blocking mode. Defaults to 20.0.\n\n        Returns:\n            str: The output of the command execution.\n        \"\"\"\n        # Auto-generate ID if not provided\n        if id is None:\n            import time\n            id = f\"auto_{int(time.time() * 1000)}\"\n\n        result = super().shell_exec(id=id, command=command, block=block, timeout=timeout)\n\n        # If the command executed successfully but returned empty output,\n        # provide a clear success message to help the AI agent understand\n        # that the command completed without error.\n        if block and result == \"\":\n            return \"Command executed successfully (no output).\"\n\n        return result\n\n    @classmethod\n    def shutdown(cls):\n        if cls._thread_pool:\n            cls._thread_pool.shutdown(wait=True)\n            cls._thread_pool = None",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 19,
                "column": 1
              },
              "endPosition": {
                "line": 20,
                "column": 1
              }
            },
            {
              "startPosition": {
                "line": 20,
                "column": 1
              },
              "endPosition": {
                "line": 21,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "@auto_listen_toolkit(BaseTerminalToolkit)",
            "lineNumber": 19
          },
          {
            "text": "class TerminalToolkit(BaseTerminalToolkit, AbstractToolkit):",
            "lineNumber": 20,
            "isSignature": true
          },
          {
            "lineNumber": 142
          },
          {
            "lineNumber": 143
          },
          {
            "text": "    def shell_exec(",
            "lineNumber": 144
          },
          {
            "text": "        self,",
            "lineNumber": 145
          },
          {
            "text": "        command: str,",
            "lineNumber": 146
          },
          {
            "text": "        id: str | None = None,",
            "lineNumber": 147
          },
          {
            "text": "        block: bool = True,",
            "lineNumber": 148
          },
          {
            "text": "        timeout: float = 20.0,",
            "lineNumber": 149
          },
          {
            "text": "    ) -&gt; str:",
            "lineNumber": 150
          },
          {
            "text": "        r\"\"\"Executes a shell command in blocking or non-blocking mode.",
            "lineNumber": 151
          },
          {
            "lineNumber": 152
          },
          {
            "text": "        Args:",
            "lineNumber": 153
          },
          {
            "text": "            command (str): The shell command to execute.",
            "lineNumber": 154
          },
          {
            "text": "            id (str, optional): A unique identifier for the command's session.",
            "lineNumber": 155
          },
          {
            "text": "                If not provided, a unique ID will be automatically generated.",
            "lineNumber": 156
          },
          {
            "text": "            block (bool, optional): Determines the execution mode. Defaults to True.",
            "lineNumber": 157
          },
          {
            "text": "            timeout (float, optional): Timeout in seconds for blocking mode. Defaults to 20.0.",
            "lineNumber": 158
          },
          {
            "lineNumber": 159
          },
          {
            "text": "        Returns:",
            "lineNumber": 160
          },
          {
            "text": "            str: The output of the command execution.",
            "lineNumber": 161
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 162
          },
          {
            "text": "        # Auto-generate ID if not provided",
            "lineNumber": 163
          },
          {
            "text": "        if id is None:",
            "lineNumber": 164
          },
          {
            "text": "            import time",
            "lineNumber": 165
          },
          {
            "text": "            id = f\"auto_{int(time.time() * 1000)}\"",
            "lineNumber": 166
          },
          {
            "lineNumber": 167
          },
          {
            "text": "        result = super().shell_exec(id=id, command=command, block=block, timeout=timeout)",
            "lineNumber": 168
          },
          {
            "lineNumber": 169
          },
          {
            "text": "        # If the command executed successfully but returned empty output,",
            "lineNumber": 170
          },
          {
            "text": "        # provide a clear success message to help the AI agent understand",
            "lineNumber": 171
          },
          {
            "text": "        # that the command completed without error.",
            "lineNumber": 172
          },
          {
            "text": "        if block and result == \"\":",
            "lineNumber": 173
          },
          {
            "text": "            return \"Command executed successfully (no output).\"",
            "lineNumber": 174
          },
          {
            "lineNumber": 175
          },
          {
            "text": "        return result",
            "lineNumber": 176
          },
          {
            "lineNumber": 177
          },
          {
            "text": "    @classmethod",
            "lineNumber": 178
          },
          {
            "text": "    def shutdown(cls):",
            "lineNumber": 179
          },
          {
            "text": "        if cls._thread_pool:",
            "lineNumber": 180
          },
          {
            "text": "            cls._thread_pool.shutdown(wait=True)",
            "lineNumber": 181
          },
          {
            "text": "            cls._thread_pool = None",
            "lineNumber": 182,
            "isSignature": true
          }
        ]
      },
      "score": 0.35967016220092773
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\pass\\main-260120.log",
        "range": {
          "startPosition": {
            "line": 1159
          },
          "endPosition": {
            "line": 1192
          }
        },
        "contents": "    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at Socket.&lt;anonymous&gt; (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.&lt;anonymous&gt; (node:net:343:12)\n[info] Successfully sent SIGTERM to process tree\n[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 26760 /T /F\n���~: PID �� 54108 (PID �� 52748 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 52748 (PID �� 57212 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 41096 (PID �� 26760 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 57212 (PID �� 26760 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n���~: PID �� 26760 (PID �� 54536 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: �S�����b���檺�u�@�Ҷ��C\r\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at Socket.&lt;anonymous&gt; (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.&lt;anonymous&gt; (node:net:343:12)\n[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 26760 /T /F\n���~: PID �� 54108 (PID �� 52748 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C\n��]: ���䴩�ҹ��ժ��ާ@�C\r",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 1161
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 1162
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 1163
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 1164
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 1165
          },
          {
            "text": "    at Socket.&lt;anonymous&gt; (node:internal/child_process:456:11)",
            "lineNumber": 1166
          },
          {
            "text": "    at Socket.emit (node:events:518:28)",
            "lineNumber": 1167
          },
          {
            "text": "    at Pipe.&lt;anonymous&gt; (node:net:343:12)",
            "lineNumber": 1168
          },
          {
            "text": "[info] Successfully sent SIGTERM to process tree",
            "lineNumber": 1169
          },
          {
            "text": "[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 26760 /T /F",
            "lineNumber": 1170
          },
          {
            "text": "���~: PID �� 54108 (PID �� 52748 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 1171
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 1172
          },
          {
            "text": "���~: PID �� 52748 (PID �� 57212 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 1173
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 1174
          },
          {
            "text": "���~: PID �� 41096 (PID �� 26760 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 1175
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 1176
          },
          {
            "text": "���~: PID �� 57212 (PID �� 26760 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 1177
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 1178
          },
          {
            "text": "���~: PID �� 26760 (PID �� 54536 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 1179
          },
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 1180
          },
          {
            "lineNumber": 1181
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 1182
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 1183
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 1184
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 1185
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 1186
          },
          {
            "text": "    at Socket.&lt;anonymous&gt; (node:internal/child_process:456:11)",
            "lineNumber": 1187
          },
          {
            "text": "    at Socket.emit (node:events:518:28)",
            "lineNumber": 1188
          },
          {
            "text": "    at Pipe.&lt;anonymous&gt; (node:net:343:12)",
            "lineNumber": 1189
          },
          {
            "text": "[error] Failed to clean up process tree with SIGTERM: Error: Command failed: taskkill /pid 26760 /T /F",
            "lineNumber": 1190
          },
          {
            "text": "���~: PID �� 54108 (PID �� 52748 ���l�B�z�{��) ���B�z�{�ǵL�k�פ�C",
            "lineNumber": 1191
          },
          {
            "text": "��]: ���䴩�ҹ��ժ��ާ@�C\r",
            "lineNumber": 1192
          }
        ]
      },
      "score": 0.35541826486587524
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\app\\utils\\agent.py",
        "range": {
          "startPosition": {
            "line": 83
          },
          "endPosition": {
            "line": 654
          }
        },
        "contents": "class ListenChatAgent(ChatAgent):\n@traceroot.trace()\ndef _execute_tool(self, tool_call_request: ToolCallRequest) -&gt; ToolCallingRecord:\n\n            # Prepare result message with truncation\n            if isinstance(result, str):\n                result_msg = result\n            else:\n                result_str = repr(result)\n                MAX_RESULT_LENGTH = 500\n                if len(result_str) &gt; MAX_RESULT_LENGTH:\n                    result_msg = (\n                        result_str[:MAX_RESULT_LENGTH]\n                        + f\"... (truncated, total length: {len(result_str)} chars)\"\n                    )\n                else:\n                    result_msg = result_str\n\n            # Only send deactivate event if tool is NOT wrapped by @listen_toolkit\n            if not has_listen_decorator:\n                asyncio.create_task(\n                    task_lock.put_queue(\n                        ActionDeactivateToolkitData(\n                            data={\n                                \"agent_name\": self.agent_name,\n                                \"process_task_id\": self.process_task_id,\n                                \"toolkit_name\": toolkit_name,\n                                \"method_name\": func_name,\n                                \"message\": result_msg,\n                            },\n                        )\n                    )\n                )\n        except Exception as e:\n            # Capture the error message to prevent framework crash\n            error_msg = f\"Error executing tool '{func_name}': {e!s}\"\n            result = f\"Tool execution failed: {error_msg}\"\n            mask_flag = False\n            traceroot_logger.error(\n                f\"Tool execution failed for {func_name}: {e}\", exc_info=True\n            )\n\n        return self._record_tool_calling(\n            func_name,\n            args,\n            result,\n            tool_call_id,\n            mask_output=mask_flag,\n            extra_content=tool_call_request.extra_content,\n        )\n\n    @traceroot.trace()\n    async def _aexecute_tool(\n        self, tool_call_request: ToolCallRequest\n    ) -&gt; ToolCallingRecord:\n        ",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 84,
                "column": 1
              },
              "endPosition": {
                "line": 85,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 276,
                "column": 5
              },
              "endPosition": {
                "line": 277,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 277,
                "column": 5
              },
              "endPosition": {
                "line": 282,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ListenChatAgent(ChatAgent):",
            "lineNumber": 84,
            "isSignature": true
          },
          {
            "text": "@traceroot.trace()",
            "lineNumber": 361
          },
          {
            "text": "def _execute_tool(self, tool_call_request: ToolCallRequest) -&gt; ToolCallingRecord:",
            "lineNumber": 362
          },
          {
            "lineNumber": 418
          },
          {
            "text": "            # Prepare result message with truncation",
            "lineNumber": 419
          },
          {
            "text": "            if isinstance(result, str):",
            "lineNumber": 420
          },
          {
            "text": "                result_msg = result",
            "lineNumber": 421
          },
          {
            "text": "            else:",
            "lineNumber": 422
          },
          {
            "text": "                result_str = repr(result)",
            "lineNumber": 423
          },
          {
            "text": "                MAX_RESULT_LENGTH = 500",
            "lineNumber": 424
          },
          {
            "text": "                if len(result_str) &gt; MAX_RESULT_LENGTH:",
            "lineNumber": 425
          },
          {
            "text": "                    result_msg = (",
            "lineNumber": 426
          },
          {
            "text": "                        result_str[:MAX_RESULT_LENGTH]",
            "lineNumber": 427
          },
          {
            "text": "                        + f\"... (truncated, total length: {len(result_str)} chars)\"",
            "lineNumber": 428
          },
          {
            "text": "                    )",
            "lineNumber": 429
          },
          {
            "text": "                else:",
            "lineNumber": 430
          },
          {
            "text": "                    result_msg = result_str",
            "lineNumber": 431
          },
          {
            "lineNumber": 432
          },
          {
            "text": "            # Only send deactivate event if tool is NOT wrapped by @listen_toolkit",
            "lineNumber": 433
          },
          {
            "text": "            if not has_listen_decorator:",
            "lineNumber": 434
          },
          {
            "text": "                asyncio.create_task(",
            "lineNumber": 435
          },
          {
            "text": "                    task_lock.put_queue(",
            "lineNumber": 436
          },
          {
            "text": "                        ActionDeactivateToolkitData(",
            "lineNumber": 437
          },
          {
            "text": "                            data={",
            "lineNumber": 438
          },
          {
            "text": "                                \"agent_name\": self.agent_name,",
            "lineNumber": 439
          },
          {
            "text": "                                \"process_task_id\": self.process_task_id,",
            "lineNumber": 440
          },
          {
            "text": "                                \"toolkit_name\": toolkit_name,",
            "lineNumber": 441
          },
          {
            "text": "                                \"method_name\": func_name,",
            "lineNumber": 442
          },
          {
            "text": "                                \"message\": result_msg,",
            "lineNumber": 443
          },
          {
            "text": "                            },",
            "lineNumber": 444
          },
          {
            "text": "                        )",
            "lineNumber": 445
          },
          {
            "text": "                    )",
            "lineNumber": 446
          },
          {
            "text": "                )",
            "lineNumber": 447
          },
          {
            "text": "        except Exception as e:",
            "lineNumber": 448
          },
          {
            "text": "            # Capture the error message to prevent framework crash",
            "lineNumber": 449
          },
          {
            "text": "            error_msg = f\"Error executing tool '{func_name}': {e!s}\"",
            "lineNumber": 450
          },
          {
            "text": "            result = f\"Tool execution failed: {error_msg}\"",
            "lineNumber": 451
          },
          {
            "text": "            mask_flag = False",
            "lineNumber": 452
          },
          {
            "text": "            traceroot_logger.error(",
            "lineNumber": 453
          },
          {
            "text": "                f\"Tool execution failed for {func_name}: {e}\", exc_info=True",
            "lineNumber": 454
          },
          {
            "text": "            )",
            "lineNumber": 455
          },
          {
            "lineNumber": 456
          },
          {
            "text": "        return self._record_tool_calling(",
            "lineNumber": 457
          },
          {
            "text": "            func_name,",
            "lineNumber": 458
          },
          {
            "text": "            args,",
            "lineNumber": 459
          },
          {
            "text": "            result,",
            "lineNumber": 460
          },
          {
            "text": "            tool_call_id,",
            "lineNumber": 461
          },
          {
            "text": "            mask_output=mask_flag,",
            "lineNumber": 462
          },
          {
            "text": "            extra_content=tool_call_request.extra_content,",
            "lineNumber": 463
          },
          {
            "text": "        )",
            "lineNumber": 464
          },
          {
            "lineNumber": 465
          },
          {
            "text": "    @traceroot.trace()",
            "lineNumber": 466
          },
          {
            "text": "    async def _aexecute_tool(",
            "lineNumber": 467
          },
          {
            "text": "        self, tool_call_request: ToolCallRequest",
            "lineNumber": 468
          },
          {
            "text": "    ) -&gt; ToolCallingRecord:",
            "lineNumber": 469
          },
          {
            "text": "        ",
            "lineNumber": 470
          }
        ]
      },
      "score": 0.3545443117618561
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\app\\utils\\single_agent_worker.py",
        "range": {
          "startPosition": {
            "line": 15
          },
          "endPosition": {
            "line": 250,
            "column": 29
          }
        },
        "contents": "class SingleAgentWorker(BaseSingleAgentWorker):\nasync def _process_task(self, task: Task, dependencies: list[Task]) -&gt; TaskState:\n\n\n        if not self.use_structured_output_handler:\n            # Handle native structured output parsing\n            if task_result is None:\n                logger.error(\"Error in worker step execution: Invalid task result\")\n                print(f\"{Fore.RED}Error in worker step execution: Invalid task result{Fore.RESET}\")\n                task_result = TaskResult(\n                    content=\"Failed to generate valid task result.\",\n                    failed=True,\n                )\n\n        color = Fore.RED if task_result.failed else Fore.GREEN  # type: ignore[union-attr]\n        print(\n            f\"\\n{color}{task_result.content}{Fore.RESET}\\n======\",  # type: ignore[union-attr]\n        )\n\n        if task_result.failed:  # type: ignore[union-attr]\n            logger.error(f\"{task_result.content}\")  # type: ignore[union-attr]\n        else:\n            logger.info(f\"{task_result.content}\")  # type: ignore[union-attr]\n\n        task.result = task_result.content  # type: ignore[union-attr]\n\n        if task_result.failed:  # type: ignore[union-attr]\n            return TaskState.FAILED\n\n        if is_task_result_insufficient(task):\n            logger.warning(f\"Task {task.id}: Content validation failed - task marked as failed\")\n            return TaskState.FAILED\n        return TaskState.DONE",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 16,
                "column": 1
              },
              "endPosition": {
                "line": 17,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 49,
                "column": 5
              },
              "endPosition": {
                "line": 50,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class SingleAgentWorker(BaseSingleAgentWorker):",
            "lineNumber": 16,
            "isSignature": true
          },
          {
            "text": "async def _process_task(self, task: Task, dependencies: list[Task]) -&gt; TaskState:",
            "lineNumber": 49
          },
          {
            "lineNumber": 221
          },
          {
            "lineNumber": 222
          },
          {
            "text": "        if not self.use_structured_output_handler:",
            "lineNumber": 223
          },
          {
            "text": "            # Handle native structured output parsing",
            "lineNumber": 224
          },
          {
            "text": "            if task_result is None:",
            "lineNumber": 225
          },
          {
            "text": "                logger.error(\"Error in worker step execution: Invalid task result\")",
            "lineNumber": 226
          },
          {
            "text": "                print(f\"{Fore.RED}Error in worker step execution: Invalid task result{Fore.RESET}\")",
            "lineNumber": 227
          },
          {
            "text": "                task_result = TaskResult(",
            "lineNumber": 228
          },
          {
            "text": "                    content=\"Failed to generate valid task result.\",",
            "lineNumber": 229
          },
          {
            "text": "                    failed=True,",
            "lineNumber": 230
          },
          {
            "text": "                )",
            "lineNumber": 231
          },
          {
            "lineNumber": 232
          },
          {
            "text": "        color = Fore.RED if task_result.failed else Fore.GREEN  # type: ignore[union-attr]",
            "lineNumber": 233
          },
          {
            "text": "        print(",
            "lineNumber": 234
          },
          {
            "text": "            f\"\\n{color}{task_result.content}{Fore.RESET}\\n======\",  # type: ignore[union-attr]",
            "lineNumber": 235
          },
          {
            "text": "        )",
            "lineNumber": 236
          },
          {
            "lineNumber": 237
          },
          {
            "text": "        if task_result.failed:  # type: ignore[union-attr]",
            "lineNumber": 238
          },
          {
            "text": "            logger.error(f\"{task_result.content}\")  # type: ignore[union-attr]",
            "lineNumber": 239
          },
          {
            "text": "        else:",
            "lineNumber": 240
          },
          {
            "text": "            logger.info(f\"{task_result.content}\")  # type: ignore[union-attr]",
            "lineNumber": 241
          },
          {
            "lineNumber": 242
          },
          {
            "text": "        task.result = task_result.content  # type: ignore[union-attr]",
            "lineNumber": 243
          },
          {
            "lineNumber": 244
          },
          {
            "text": "        if task_result.failed:  # type: ignore[union-attr]",
            "lineNumber": 245
          },
          {
            "text": "            return TaskState.FAILED",
            "lineNumber": 246
          },
          {
            "lineNumber": 247
          },
          {
            "text": "        if is_task_result_insufficient(task):",
            "lineNumber": 248
          },
          {
            "text": "            logger.warning(f\"Task {task.id}: Content validation failed - task marked as failed\")",
            "lineNumber": 249
          },
          {
            "text": "            return TaskState.FAILED",
            "lineNumber": 250
          },
          {
            "text": "        return TaskState.DONE",
            "lineNumber": 251,
            "isSignature": true
          }
        ]
      },
      "score": 0.35194799304008484
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\pass\\main-260120.log",
        "range": {
          "startPosition": {
            "line": 2436
          },
          "endPosition": {
            "line": 2473
          }
        },
        "contents": "��]: �S�����b���檺�u�@�Ҷ��C\r\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:304:5)\n[error] Failed to force kill process tree: Error: Command failed: taskkill /pid 48172 /T /F\n���~: �䤣��B�z�{�� \"48172\"�C\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at Socket.&lt;anonymous&gt; (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.&lt;anonymous&gt; (node:net:343:12)\n[info] Attempting to kill process on port: 5001\n[error] Failed to kill process on port 5001: Error: Command failed: netstat -ano | findstr LISTENING | findstr :5001\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:304:5)\n[info] All cleanup completed, exiting...\n[info] [MAIN] Waiting for profile initialization...\n[info] [CDP BROWSER] Created CDP profile directory at C:\\Users\\chad\\.eigent\\browser_profiles\\cdp_profile_9222\n[info] [CDP BROWSER] Chrome DevTools Protocol enabled on port 9222\n[info] [CDP BROWSER] CDP profile directory: C:\\Users\\chad\\.eigent\\browser_profiles\\cdp_profile_9222\n[info] [STORAGE] Main app userData: C:\\Users\\chad\\AppData\\Roaming\\eigent\n[info] [MAIN] Profile initialization completed\n[info] [DEVTOOLS] Installing React DevTools extension...\n[info] [DEVTOOLS] Successfully installed extension: [object Object]",
        "signatures": {},
        "detailedLines": [
          {
            "text": "��]: �S�����b���檺�u�@�Ҷ��C\r",
            "lineNumber": 2437
          },
          {
            "lineNumber": 2438
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 2439
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 2440
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 2441
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 2442
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 2443
          },
          {
            "text": "    at ChildProcess._handle.onexit (node:internal/child_process:304:5)",
            "lineNumber": 2444
          },
          {
            "text": "[error] Failed to force kill process tree: Error: Command failed: taskkill /pid 48172 /T /F",
            "lineNumber": 2445
          },
          {
            "text": "���~: �䤣��B�z�{�� \"48172\"�C",
            "lineNumber": 2446
          },
          {
            "lineNumber": 2447
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 2448
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 2449
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 2450
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 2451
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 2452
          },
          {
            "text": "    at Socket.&lt;anonymous&gt; (node:internal/child_process:456:11)",
            "lineNumber": 2453
          },
          {
            "text": "    at Socket.emit (node:events:518:28)",
            "lineNumber": 2454
          },
          {
            "text": "    at Pipe.&lt;anonymous&gt; (node:net:343:12)",
            "lineNumber": 2455
          },
          {
            "text": "[info] Attempting to kill process on port: 5001",
            "lineNumber": 2456
          },
          {
            "text": "[error] Failed to kill process on port 5001: Error: Command failed: netstat -ano | findstr LISTENING | findstr :5001",
            "lineNumber": 2457
          },
          {
            "lineNumber": 2458
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 2459
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 2460
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 2461
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 2462
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 2463
          },
          {
            "text": "    at ChildProcess._handle.onexit (node:internal/child_process:304:5)",
            "lineNumber": 2464
          },
          {
            "text": "[info] All cleanup completed, exiting...",
            "lineNumber": 2465
          },
          {
            "text": "[info] [MAIN] Waiting for profile initialization...",
            "lineNumber": 2466
          },
          {
            "text": "[info] [CDP BROWSER] Created CDP profile directory at C:\\Users\\chad\\.eigent\\browser_profiles\\cdp_profile_9222",
            "lineNumber": 2467
          },
          {
            "text": "[info] [CDP BROWSER] Chrome DevTools Protocol enabled on port 9222",
            "lineNumber": 2468
          },
          {
            "text": "[info] [CDP BROWSER] CDP profile directory: C:\\Users\\chad\\.eigent\\browser_profiles\\cdp_profile_9222",
            "lineNumber": 2469
          },
          {
            "text": "[info] [STORAGE] Main app userData: C:\\Users\\chad\\AppData\\Roaming\\eigent",
            "lineNumber": 2470
          },
          {
            "text": "[info] [MAIN] Profile initialization completed",
            "lineNumber": 2471
          },
          {
            "text": "[info] [DEVTOOLS] Installing React DevTools extension...",
            "lineNumber": 2472
          },
          {
            "text": "[info] [DEVTOOLS] Successfully installed extension: [object Object]",
            "lineNumber": 2473
          }
        ]
      },
      "score": 0.35061800479888916
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\pass\\main-260120.log",
        "range": {
          "startPosition": {
            "line": 906
          },
          "endPosition": {
            "line": 943
          }
        },
        "contents": "[error] Failed to force kill process tree: Error: Command failed: taskkill /pid 15676 /T /F\n���~: �䤣��B�z�{�� \"15676\"�C\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at Socket.&lt;anonymous&gt; (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.&lt;anonymous&gt; (node:net:343:12)\n[info] Attempting to kill process on port: 5001\n[error] Failed to force kill process tree: Error: Command failed: taskkill /pid 15676 /T /F\n���~: �䤣��B�z�{�� \"15676\"�C\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:304:5)\n[info] Attempting to kill process on port: 5001\n[error] Failed to kill process on port 5001: Error: Command failed: netstat -ano | findstr LISTENING | findstr :5001\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:304:5)\n[info] All cleanup completed, exiting...\n[info] [MAIN] Waiting for profile initialization...\n[info] [CDP BROWSER] Created CDP profile directory at C:\\Users\\chad\\.eigent\\browser_profiles\\cdp_profile_9222\n[info] [CDP BROWSER] Chrome DevTools Protocol enabled on port 9222\n[info] [CDP BROWSER] CDP profile directory: C:\\Users\\chad\\.eigent\\browser_profiles\\cdp_profile_9222\n[info] [STORAGE] Main app userData: C:\\Users\\chad\\AppData\\Roaming\\eigent\n[info] [MAIN] Profile initialization completed",
        "signatures": {},
        "detailedLines": [
          {
            "text": "[error] Failed to force kill process tree: Error: Command failed: taskkill /pid 15676 /T /F",
            "lineNumber": 907
          },
          {
            "text": "���~: �䤣��B�z�{�� \"15676\"�C",
            "lineNumber": 908
          },
          {
            "lineNumber": 909
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 910
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 911
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 912
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 913
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 914
          },
          {
            "text": "    at Socket.&lt;anonymous&gt; (node:internal/child_process:456:11)",
            "lineNumber": 915
          },
          {
            "text": "    at Socket.emit (node:events:518:28)",
            "lineNumber": 916
          },
          {
            "text": "    at Pipe.&lt;anonymous&gt; (node:net:343:12)",
            "lineNumber": 917
          },
          {
            "text": "[info] Attempting to kill process on port: 5001",
            "lineNumber": 918
          },
          {
            "text": "[error] Failed to force kill process tree: Error: Command failed: taskkill /pid 15676 /T /F",
            "lineNumber": 919
          },
          {
            "text": "���~: �䤣��B�z�{�� \"15676\"�C",
            "lineNumber": 920
          },
          {
            "lineNumber": 921
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 922
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 923
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 924
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 925
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 926
          },
          {
            "text": "    at ChildProcess._handle.onexit (node:internal/child_process:304:5)",
            "lineNumber": 927
          },
          {
            "text": "[info] Attempting to kill process on port: 5001",
            "lineNumber": 928
          },
          {
            "text": "[error] Failed to kill process on port 5001: Error: Command failed: netstat -ano | findstr LISTENING | findstr :5001",
            "lineNumber": 929
          },
          {
            "lineNumber": 930
          },
          {
            "text": "    at genericNodeError (node:internal/errors:984:15)",
            "lineNumber": 931
          },
          {
            "text": "    at wrappedFn (node:internal/errors:538:14)",
            "lineNumber": 932
          },
          {
            "text": "    at ChildProcess.exithandler (node:child_process:422:12)",
            "lineNumber": 933
          },
          {
            "text": "    at ChildProcess.emit (node:events:518:28)",
            "lineNumber": 934
          },
          {
            "text": "    at maybeClose (node:internal/child_process:1104:16)",
            "lineNumber": 935
          },
          {
            "text": "    at ChildProcess._handle.onexit (node:internal/child_process:304:5)",
            "lineNumber": 936
          },
          {
            "text": "[info] All cleanup completed, exiting...",
            "lineNumber": 937
          },
          {
            "text": "[info] [MAIN] Waiting for profile initialization...",
            "lineNumber": 938
          },
          {
            "text": "[info] [CDP BROWSER] Created CDP profile directory at C:\\Users\\chad\\.eigent\\browser_profiles\\cdp_profile_9222",
            "lineNumber": 939
          },
          {
            "text": "[info] [CDP BROWSER] Chrome DevTools Protocol enabled on port 9222",
            "lineNumber": 940
          },
          {
            "text": "[info] [CDP BROWSER] CDP profile directory: C:\\Users\\chad\\.eigent\\browser_profiles\\cdp_profile_9222",
            "lineNumber": 941
          },
          {
            "text": "[info] [STORAGE] Main app userData: C:\\Users\\chad\\AppData\\Roaming\\eigent",
            "lineNumber": 942
          },
          {
            "text": "[info] [MAIN] Profile initialization completed",
            "lineNumber": 943
          }
        ]
      },
      "score": 0.34708189964294434
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\app\\utils\\agent.py",
        "range": {
          "startPosition": {
            "line": 83
          },
          "endPosition": {
            "line": 654
          }
        },
        "contents": "class ListenChatAgent(ChatAgent):\n@traceroot.trace()\nasync def astep(\n        self,\n        input_message: BaseMessage | str,\n        response_format: type[BaseModel] | None = None,\n    ) -&gt; ChatAgentResponse | AsyncStreamingChatAgentResponse:\n\n\n        try:\n            res = await super().astep(input_message, response_format)\n            if isinstance(res, AsyncStreamingChatAgentResponse):\n                res = await res._get_final_response()\n        except ModelProcessingError as e:\n            res = None\n            error_info = e\n            if \"Budget has been exceeded\" in str(e):\n                message = \"Budget has been exceeded\"\n                traceroot_logger.warning(f\"Agent {self.agent_name} budget exceeded\")\n                asyncio.create_task(task_lock.put_queue(ActionBudgetNotEnough()))\n            else:\n                message = str(e)\n                traceroot_logger.error(\n                    f\"Agent {self.agent_name} model processing error: {e}\"\n                )\n            total_tokens = 0\n        except Exception as e:\n            res = None\n            error_info = e\n            traceroot_logger.error(\n                f\"Agent {self.agent_name} unexpected error in async step: {e}\",\n                exc_info=True,\n            )\n            message = f\"Error processing message: {e!s}\"\n            total_tokens = 0\n\n        if res is not None:\n            message = res.msg.content if res.msg else \"\"\n            total_tokens = res.info[\"usage\"][\"total_tokens\"]\n            traceroot_logger.info(\n                f\"Agent {self.agent_name} completed step, tokens used: {total_tokens}\"\n            )\n\n        assert message is not None\n\n        asyncio.create_task(\n            task_lock.put_queue(\n                ActionDeactivateAgentData(\n                    data={\n                        \"agent_name\": self.agent_name,\n                        \"process_task_id\": self.process_task_id,\n                        \"agent_id\": self.agent_id,\n                        \"message\": message,\n                        \"tokens\": total_tokens,\n                    },\n                )\n            )\n        )\n\n        if error_info is not None:\n            raise error_info\n        assert res is not None\n        return res",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 84,
                "column": 1
              },
              "endPosition": {
                "line": 85,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 276,
                "column": 5
              },
              "endPosition": {
                "line": 277,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 277,
                "column": 5
              },
              "endPosition": {
                "line": 282,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ListenChatAgent(ChatAgent):",
            "lineNumber": 84,
            "isSignature": true
          },
          {
            "text": "@traceroot.trace()",
            "lineNumber": 276
          },
          {
            "text": "async def astep(",
            "lineNumber": 277
          },
          {
            "text": "        self,",
            "lineNumber": 278
          },
          {
            "text": "        input_message: BaseMessage | str,",
            "lineNumber": 279
          },
          {
            "text": "        response_format: type[BaseModel] | None = None,",
            "lineNumber": 280
          },
          {
            "text": "    ) -&gt; ChatAgentResponse | AsyncStreamingChatAgentResponse:",
            "lineNumber": 281
          },
          {
            "lineNumber": 304
          },
          {
            "lineNumber": 305
          },
          {
            "text": "        try:",
            "lineNumber": 306
          },
          {
            "text": "            res = await super().astep(input_message, response_format)",
            "lineNumber": 307
          },
          {
            "text": "            if isinstance(res, AsyncStreamingChatAgentResponse):",
            "lineNumber": 308
          },
          {
            "text": "                res = await res._get_final_response()",
            "lineNumber": 309
          },
          {
            "text": "        except ModelProcessingError as e:",
            "lineNumber": 310
          },
          {
            "text": "            res = None",
            "lineNumber": 311
          },
          {
            "text": "            error_info = e",
            "lineNumber": 312
          },
          {
            "text": "            if \"Budget has been exceeded\" in str(e):",
            "lineNumber": 313
          },
          {
            "text": "                message = \"Budget has been exceeded\"",
            "lineNumber": 314
          },
          {
            "text": "                traceroot_logger.warning(f\"Agent {self.agent_name} budget exceeded\")",
            "lineNumber": 315
          },
          {
            "text": "                asyncio.create_task(task_lock.put_queue(ActionBudgetNotEnough()))",
            "lineNumber": 316
          },
          {
            "text": "            else:",
            "lineNumber": 317
          },
          {
            "text": "                message = str(e)",
            "lineNumber": 318
          },
          {
            "text": "                traceroot_logger.error(",
            "lineNumber": 319
          },
          {
            "text": "                    f\"Agent {self.agent_name} model processing error: {e}\"",
            "lineNumber": 320
          },
          {
            "text": "                )",
            "lineNumber": 321
          },
          {
            "text": "            total_tokens = 0",
            "lineNumber": 322
          },
          {
            "text": "        except Exception as e:",
            "lineNumber": 323
          },
          {
            "text": "            res = None",
            "lineNumber": 324
          },
          {
            "text": "            error_info = e",
            "lineNumber": 325
          },
          {
            "text": "            traceroot_logger.error(",
            "lineNumber": 326
          },
          {
            "text": "                f\"Agent {self.agent_name} unexpected error in async step: {e}\",",
            "lineNumber": 327
          },
          {
            "text": "                exc_info=True,",
            "lineNumber": 328
          },
          {
            "text": "            )",
            "lineNumber": 329
          },
          {
            "text": "            message = f\"Error processing message: {e!s}\"",
            "lineNumber": 330
          },
          {
            "text": "            total_tokens = 0",
            "lineNumber": 331
          },
          {
            "lineNumber": 332
          },
          {
            "text": "        if res is not None:",
            "lineNumber": 333
          },
          {
            "text": "            message = res.msg.content if res.msg else \"\"",
            "lineNumber": 334
          },
          {
            "text": "            total_tokens = res.info[\"usage\"][\"total_tokens\"]",
            "lineNumber": 335
          },
          {
            "text": "            traceroot_logger.info(",
            "lineNumber": 336
          },
          {
            "text": "                f\"Agent {self.agent_name} completed step, tokens used: {total_tokens}\"",
            "lineNumber": 337
          },
          {
            "text": "            )",
            "lineNumber": 338
          },
          {
            "lineNumber": 339
          },
          {
            "text": "        assert message is not None",
            "lineNumber": 340
          },
          {
            "lineNumber": 341
          },
          {
            "text": "        asyncio.create_task(",
            "lineNumber": 342
          },
          {
            "text": "            task_lock.put_queue(",
            "lineNumber": 343
          },
          {
            "text": "                ActionDeactivateAgentData(",
            "lineNumber": 344
          },
          {
            "text": "                    data={",
            "lineNumber": 345
          },
          {
            "text": "                        \"agent_name\": self.agent_name,",
            "lineNumber": 346
          },
          {
            "text": "                        \"process_task_id\": self.process_task_id,",
            "lineNumber": 347
          },
          {
            "text": "                        \"agent_id\": self.agent_id,",
            "lineNumber": 348
          },
          {
            "text": "                        \"message\": message,",
            "lineNumber": 349
          },
          {
            "text": "                        \"tokens\": total_tokens,",
            "lineNumber": 350
          },
          {
            "text": "                    },",
            "lineNumber": 351
          },
          {
            "text": "                )",
            "lineNumber": 352
          },
          {
            "text": "            )",
            "lineNumber": 353
          },
          {
            "text": "        )",
            "lineNumber": 354
          },
          {
            "lineNumber": 355
          },
          {
            "text": "        if error_info is not None:",
            "lineNumber": 356
          },
          {
            "text": "            raise error_info",
            "lineNumber": 357
          },
          {
            "text": "        assert res is not None",
            "lineNumber": 358
          },
          {
            "text": "        return res",
            "lineNumber": 359
          }
        ]
      },
      "score": 0.3439730405807495
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\app\\utils\\toolkit\\hybrid_browser_toolkit.py",
        "range": {
          "startPosition": {
            "line": 21
          },
          "endPosition": {
            "line": 226
          }
        },
        "contents": "class WebSocketBrowserWrapper(BaseWebSocketBrowserWrapper):\nasync def start(self):\n        # Simply use the parent implementation which uses system npm/node\n\n        await super().start()\n\n    async def _send_command(self, command: str, params: Dict[str, Any]) -&gt; Dict[str, Any]:\n        \"\"\"Send a command to the WebSocket server with enhanced error handling.\"\"\"\n        try:\n            # First ensure we have a valid connection\n            if self.websocket is None:\n                raise RuntimeError(\"WebSocket connection not established\")\n\n            # Check connection state before sending\n            if hasattr(self.websocket, \"state\"):\n                import websockets.protocol\n\n                if self.websocket.state != websockets.protocol.State.OPEN:\n                    raise RuntimeError(f\"WebSocket is in {self.websocket.state} state, not OPEN\")\n\n            logger.debug(f\"Sending command '{command}' with params: {params}\")\n\n            # Call parent's _send_command\n            result = await super()._send_command(command, params)\n\n            logger.debug(f\"Command '{command}' completed successfully\")\n            return result\n\n        except RuntimeError as e:\n            logger.error(f\"Failed to send command '{command}': {e}\")\n            # Check if it's a connection issue\n            if \"WebSocket\" in str(e) or \"connection\" in str(e).lower():\n                # Mark connection as dead\n                self.websocket = None\n            raise\n        except Exception as e:\n            logger.error(f\"Unexpected error sending command '{command}': {type(e).__name__}: {e}\")\n            raise\n\n\n# WebSocket connection pool\nclass WebSocketConnectionPool:\n    \"\"\"Manage WebSocket browser connections with session-based pooling.\"\"\"",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 22,
                "column": 1
              },
              "endPosition": {
                "line": 23,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class WebSocketBrowserWrapper(BaseWebSocketBrowserWrapper):",
            "lineNumber": 22,
            "isSignature": true
          },
          {
            "text": "async def start(self):",
            "lineNumber": 100
          },
          {
            "text": "        # Simply use the parent implementation which uses system npm/node",
            "lineNumber": 101
          },
          {
            "lineNumber": 103
          },
          {
            "text": "        await super().start()",
            "lineNumber": 104
          },
          {
            "lineNumber": 105
          },
          {
            "text": "    async def _send_command(self, command: str, params: Dict[str, Any]) -&gt; Dict[str, Any]:",
            "lineNumber": 106
          },
          {
            "text": "        \"\"\"Send a command to the WebSocket server with enhanced error handling.\"\"\"",
            "lineNumber": 107
          },
          {
            "text": "        try:",
            "lineNumber": 108
          },
          {
            "text": "            # First ensure we have a valid connection",
            "lineNumber": 109
          },
          {
            "text": "            if self.websocket is None:",
            "lineNumber": 110
          },
          {
            "text": "                raise RuntimeError(\"WebSocket connection not established\")",
            "lineNumber": 111
          },
          {
            "lineNumber": 112
          },
          {
            "text": "            # Check connection state before sending",
            "lineNumber": 113
          },
          {
            "text": "            if hasattr(self.websocket, \"state\"):",
            "lineNumber": 114
          },
          {
            "text": "                import websockets.protocol",
            "lineNumber": 115
          },
          {
            "lineNumber": 116
          },
          {
            "text": "                if self.websocket.state != websockets.protocol.State.OPEN:",
            "lineNumber": 117
          },
          {
            "text": "                    raise RuntimeError(f\"WebSocket is in {self.websocket.state} state, not OPEN\")",
            "lineNumber": 118
          },
          {
            "lineNumber": 119
          },
          {
            "text": "            logger.debug(f\"Sending command '{command}' with params: {params}\")",
            "lineNumber": 120
          },
          {
            "lineNumber": 121
          },
          {
            "text": "            # Call parent's _send_command",
            "lineNumber": 122
          },
          {
            "text": "            result = await super()._send_command(command, params)",
            "lineNumber": 123
          },
          {
            "lineNumber": 124
          },
          {
            "text": "            logger.debug(f\"Command '{command}' completed successfully\")",
            "lineNumber": 125
          },
          {
            "text": "            return result",
            "lineNumber": 126
          },
          {
            "lineNumber": 127
          },
          {
            "text": "        except RuntimeError as e:",
            "lineNumber": 128
          },
          {
            "text": "            logger.error(f\"Failed to send command '{command}': {e}\")",
            "lineNumber": 129
          },
          {
            "text": "            # Check if it's a connection issue",
            "lineNumber": 130
          },
          {
            "text": "            if \"WebSocket\" in str(e) or \"connection\" in str(e).lower():",
            "lineNumber": 131
          },
          {
            "text": "                # Mark connection as dead",
            "lineNumber": 132
          },
          {
            "text": "                self.websocket = None",
            "lineNumber": 133
          },
          {
            "text": "            raise",
            "lineNumber": 134
          },
          {
            "text": "        except Exception as e:",
            "lineNumber": 135
          },
          {
            "text": "            logger.error(f\"Unexpected error sending command '{command}': {type(e).__name__}: {e}\")",
            "lineNumber": 136
          },
          {
            "text": "            raise",
            "lineNumber": 137,
            "isSignature": true
          },
          {
            "lineNumber": 138
          },
          {
            "lineNumber": 139
          },
          {
            "text": "# WebSocket connection pool",
            "lineNumber": 140
          },
          {
            "text": "class WebSocketConnectionPool:",
            "lineNumber": 141,
            "isSignature": true
          },
          {
            "text": "    \"\"\"Manage WebSocket browser connections with session-based pooling.\"\"\"",
            "lineNumber": 142
          }
        ]
      },
      "score": 0.3418177366256714
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\backend\\app\\utils\\agent.py",
        "range": {
          "startPosition": {
            "line": 83
          },
          "endPosition": {
            "line": 654
          }
        },
        "contents": "class ListenChatAgent(ChatAgent):\n@traceroot.trace()\ndef _execute_tool(self, tool_call_request: ToolCallRequest) -&gt; ToolCallingRecord:\n\n\n        try:\n            task_lock = get_task_lock(self.api_task_id)\n\n            toolkit_name = (\n                getattr(tool, \"_toolkit_name\")\n                if hasattr(tool, \"_toolkit_name\")\n                else \"mcp_toolkit\"\n            )\n            traceroot_logger.debug(\n                f\"Agent {self.agent_name} executing tool: {func_name} from toolkit: {toolkit_name} with args: {json.dumps(args, ensure_ascii=False)}\"\n            )\n\n            # Only send activate event if tool is NOT wrapped by @listen_toolkit\n            if not has_listen_decorator:\n                asyncio.create_task(\n                    task_lock.put_queue(\n                        ActionActivateToolkitData(\n                            data={\n                                \"agent_name\": self.agent_name,\n                                \"process_task_id\": self.process_task_id,\n                                \"toolkit_name\": toolkit_name,\n                                \"method_name\": func_name,\n                                \"message\": json.dumps(args, ensure_ascii=False),\n                            },\n                        )\n                    )\n                )\n            # Set process_task context for all tool executions\n            with set_process_task(self.process_task_id):\n                raw_result = tool(**args)\n            traceroot_logger.debug(f\"Tool {func_name} executed successfully\")\n            if self.mask_tool_output:\n                self._secure_result_store[tool_call_id] = raw_result\n                result = (\n                    \"[The tool has been executed successfully, but the output\"\n                    \" from the tool is masked. You can move forward]\"\n                )\n                mask_flag = True\n            else:\n                result = raw_result\n                mask_flag = False\n            # Prepare result message with truncation\n            if",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 84,
                "column": 1
              },
              "endPosition": {
                "line": 85,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 276,
                "column": 5
              },
              "endPosition": {
                "line": 277,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 277,
                "column": 5
              },
              "endPosition": {
                "line": 282,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ListenChatAgent(ChatAgent):",
            "lineNumber": 84,
            "isSignature": true
          },
          {
            "text": "@traceroot.trace()",
            "lineNumber": 361
          },
          {
            "text": "def _execute_tool(self, tool_call_request: ToolCallRequest) -&gt; ToolCallingRecord:",
            "lineNumber": 362
          },
          {
            "lineNumber": 376
          },
          {
            "lineNumber": 377
          },
          {
            "text": "        try:",
            "lineNumber": 378
          },
          {
            "text": "            task_lock = get_task_lock(self.api_task_id)",
            "lineNumber": 379
          },
          {
            "lineNumber": 380
          },
          {
            "text": "            toolkit_name = (",
            "lineNumber": 381
          },
          {
            "text": "                getattr(tool, \"_toolkit_name\")",
            "lineNumber": 382
          },
          {
            "text": "                if hasattr(tool, \"_toolkit_name\")",
            "lineNumber": 383
          },
          {
            "text": "                else \"mcp_toolkit\"",
            "lineNumber": 384
          },
          {
            "text": "            )",
            "lineNumber": 385
          },
          {
            "text": "            traceroot_logger.debug(",
            "lineNumber": 386
          },
          {
            "text": "                f\"Agent {self.agent_name} executing tool: {func_name} from toolkit: {toolkit_name} with args: {json.dumps(args, ensure_ascii=False)}\"",
            "lineNumber": 387
          },
          {
            "text": "            )",
            "lineNumber": 388
          },
          {
            "lineNumber": 389
          },
          {
            "text": "            # Only send activate event if tool is NOT wrapped by @listen_toolkit",
            "lineNumber": 390
          },
          {
            "text": "            if not has_listen_decorator:",
            "lineNumber": 391
          },
          {
            "text": "                asyncio.create_task(",
            "lineNumber": 392
          },
          {
            "text": "                    task_lock.put_queue(",
            "lineNumber": 393
          },
          {
            "text": "                        ActionActivateToolkitData(",
            "lineNumber": 394
          },
          {
            "text": "                            data={",
            "lineNumber": 395
          },
          {
            "text": "                                \"agent_name\": self.agent_name,",
            "lineNumber": 396
          },
          {
            "text": "                                \"process_task_id\": self.process_task_id,",
            "lineNumber": 397
          },
          {
            "text": "                                \"toolkit_name\": toolkit_name,",
            "lineNumber": 398
          },
          {
            "text": "                                \"method_name\": func_name,",
            "lineNumber": 399
          },
          {
            "text": "                                \"message\": json.dumps(args, ensure_ascii=False),",
            "lineNumber": 400
          },
          {
            "text": "                            },",
            "lineNumber": 401
          },
          {
            "text": "                        )",
            "lineNumber": 402
          },
          {
            "text": "                    )",
            "lineNumber": 403
          },
          {
            "text": "                )",
            "lineNumber": 404
          },
          {
            "text": "            # Set process_task context for all tool executions",
            "lineNumber": 405
          },
          {
            "text": "            with set_process_task(self.process_task_id):",
            "lineNumber": 406
          },
          {
            "text": "                raw_result = tool(**args)",
            "lineNumber": 407
          },
          {
            "text": "            traceroot_logger.debug(f\"Tool {func_name} executed successfully\")",
            "lineNumber": 408
          },
          {
            "text": "            if self.mask_tool_output:",
            "lineNumber": 409
          },
          {
            "text": "                self._secure_result_store[tool_call_id] = raw_result",
            "lineNumber": 410
          },
          {
            "text": "                result = (",
            "lineNumber": 411
          },
          {
            "text": "                    \"[The tool has been executed successfully, but the output\"",
            "lineNumber": 412
          },
          {
            "text": "                    \" from the tool is masked. You can move forward]\"",
            "lineNumber": 413
          },
          {
            "text": "                )",
            "lineNumber": 414
          },
          {
            "text": "                mask_flag = True",
            "lineNumber": 415
          },
          {
            "text": "            else:",
            "lineNumber": 416
          },
          {
            "text": "                result = raw_result",
            "lineNumber": 417
          },
          {
            "text": "                mask_flag = False",
            "lineNumber": 418
          },
          {
            "text": "            # Prepare result message with truncation",
            "lineNumber": 419
          },
          {
            "text": "            if",
            "lineNumber": 420
          }
        ]
      },
      "score": 0.34159499406814575
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---


搜尋執行 `taskkill` 並記錄錯誤的程式碼：


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "taskkill.*pid.*T.*F",
  "path": "electron",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "taskkill.*pid.*T.*F",
    "path": "electron",
    "outputMode": "content",
    "workspaceResults": {
      "d:\\_Code\\_GitHub\\eigent-260119": {
        "content": {
          "matches": [
            {
              "file": "electron\\main\\init.ts",
              "matches": [
                {
                  "lineNumber": 331,
                  "content": "                    spawn('taskkill', ['/pid', proc.pid.toString(), '/T', '/F']);"
                }
              ]
            }
          ],
          "totalLines": 1,
          "totalMatchedLines": 1
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "Failed to clean up process tree",
  "path": "electron",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "Failed to clean up process tree",
    "path": "electron",
    "outputMode": "content",
    "workspaceResults": {
      "d:\\_Code\\_GitHub\\eigent-260119": {
        "content": {
          "matches": [
            {
              "file": "electron\\main\\index.ts",
              "matches": [
                {
                  "lineNumber": 1728,
                  "content": "            log.error('Failed to clean up process tree with SIGTERM:', err);"
                }
              ]
            }
          ],
          "totalLines": 1,
          "totalMatchedLines": 1
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "Cleaning up Python process",
  "path": "electron",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "Cleaning up Python process",
    "path": "electron",
    "outputMode": "content",
    "workspaceResults": {
      "d:\\_Code\\_GitHub\\eigent-260119": {
        "content": {
          "matches": [
            {
              "file": "electron\\main\\index.ts",
              "matches": [
                {
                  "lineNumber": 1719,
                  "content": "      log.info('Cleaning up Python process and all children', { pid });"
                }
              ]
            }
          ],
          "totalLines": 1,
          "totalMatchedLines": 1
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---


檢視相關程式碼：


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: electron\main\index.ts</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: electron\main\init.ts</summary>

</details>
</tool-use>

---

